"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[372],{302(s,a,e){e.d(a,{A:()=>i});var l=e(43),t=e(368),n=e(579);const i=function(s){var a;let{showProfile:e=!0}=s;const i=(0,t.Zp)(),[r,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{const s=localStorage.getItem("user");s&&c(JSON.parse(s))},[]);const h=s=>s?s.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"U";return(0,n.jsxs)("header",{className:"navbar",children:[(0,n.jsx)("div",{className:"nav-left",children:(0,n.jsx)("div",{className:"logo",onClick:()=>i("/"),children:(0,n.jsx)("img",{src:"/img/logo.png",alt:"E Siksha Logo"})})}),(0,n.jsx)("div",{className:"nav-right",children:e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("nav",{className:"nav-links",children:[(0,n.jsx)("button",{className:"nav-link",onClick:()=>i("/"),children:"Home"}),(0,n.jsx)("button",{className:"nav-link",onClick:()=>i("/list"),children:"Courses"}),(0,n.jsx)("button",{className:"nav-link",onClick:()=>i("/pdf"),children:"Notes"}),(0,n.jsx)("button",{className:"nav-link",onClick:()=>i("/about"),children:"About"})]}),r?(0,n.jsxs)("div",{className:"user-profile",onClick:()=>d(!o),children:[r.avatar?(0,n.jsx)("img",{src:r.avatar,alt:r.fullName,className:"user-avatar"}):(0,n.jsx)("div",{className:"avatar-placeholder",children:h(r.fullName)}),(0,n.jsx)("span",{className:"user-name",children:(null===(a=r.fullName)||void 0===a?void 0:a.split(" ")[0])||"User"}),(0,n.jsx)("i",{className:"fas fa-chevron-".concat(o?"up":"down")}),o&&(0,n.jsxs)("div",{className:"dropdown-menu",children:[(0,n.jsx)("div",{className:"dropdown-header",children:(0,n.jsxs)("div",{className:"user-info",children:[r.avatar?(0,n.jsx)("img",{src:r.avatar,alt:r.fullName}):(0,n.jsx)("div",{className:"avatar-small",children:h(r.fullName)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:r.fullName}),(0,n.jsx)("span",{children:r.email})]})]})}),(0,n.jsx)("div",{className:"dropdown-divider"}),(0,n.jsxs)("button",{className:"dropdown-item",onClick:()=>{(()=>{const s=localStorage.getItem("user");s?"admin"===JSON.parse(s).role?i("/admin"):i("/dashboard"):i("/login")})(),d(!1)},children:[(0,n.jsx)("i",{className:"fas fa-tachometer-alt"}),"Dashboard"]}),(0,n.jsxs)("button",{className:"dropdown-item",onClick:()=>{i("/add-content"),d(!1)},children:[(0,n.jsx)("i",{className:"fas fa-plus-circle"}),"Add Content"]}),(0,n.jsxs)("button",{className:"dropdown-item",onClick:()=>{i("/profile"),d(!1)},children:[(0,n.jsx)("i",{className:"fas fa-user-cog"}),"Edit Profile"]}),(0,n.jsx)("div",{className:"dropdown-divider"}),(0,n.jsxs)("button",{className:"dropdown-item logout",onClick:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),c(null),d(!1),i("/login")},children:[(0,n.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("button",{className:"btn btn-primary",onClick:()=>i("/reg"),children:[(0,n.jsx)("i",{className:"fas fa-user-plus"}),"Sign Up"]})})]}):(0,n.jsx)("button",{className:"btn btn-primary",onClick:()=>i("/login"),children:"Get Started"})})]})}},372(s,a,e){e.r(a),e.d(a,{default:()=>r});var l=e(43),t=e(368),n=e(302),i=e(579);const r=function(){const s=(0,t.Zp)(),[a,e]=(0,l.useState)([]),[r,c]=(0,l.useState)(!0),[o,d]=(0,l.useState)(null),[h,m]=(0,l.useState)(""),[x,j]=(0,l.useState)("");(0,l.useEffect)(()=>{u()},[]);const u=async()=>{try{c(!0);const s=await fetch("http://localhost:5000/api/notes");if(!s.ok)throw new Error("HTTP error! Status: ".concat(s.status));const a=await s.json();a.success?(console.log("Fetched notes:",a.notes),e(a.notes||[])):d(a.message||"Failed to fetch notes")}catch(s){console.error("Error fetching notes:",s),d(s.message||"Failed to load notes. Please try again later.")}finally{c(!1)}},f=a=>{s("/pdf/viewer/".concat(a._id))},N=()=>{s("/add-content/notes")},p=a.filter(s=>{var a,e;const l=""===h||s.title.toLowerCase().includes(h.toLowerCase())||(null===(a=s.description)||void 0===a?void 0:a.toLowerCase().includes(h.toLowerCase()))||(null===(e=s.tags)||void 0===e?void 0:e.some(s=>s.toLowerCase().includes(h.toLowerCase()))),t=""===x||s.category===x;return l&&t}),v=[...new Set(a.map(s=>s.category).filter(Boolean))].sort(),g=s=>{if(!s)return"Date not available";try{const a={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString("en-US",a)}catch(a){return"Invalid date"}},b=a.reduce((s,a)=>s+(a.downloads||0),0),w=new Set(a.map(s=>{var a;return(null===(a=s.author)||void 0===a?void 0:a._id)||s.authorName})).size;return(0,i.jsxs)("div",{className:"pdf-page",children:[(0,i.jsx)(n.A,{}),(0,i.jsxs)("section",{className:"hero",children:[(0,i.jsx)("h1",{children:"PDF Library & Study Materials"}),(0,i.jsx)("p",{children:"Access thousands of PDFs, notes, and study resources for all your courses"})]}),r&&(0,i.jsxs)("div",{className:"loading-container",children:[(0,i.jsx)("div",{className:"spinner"}),(0,i.jsx)("p",{children:"Loading notes from database..."})]}),o&&!r&&(0,i.jsxs)("div",{className:"error-container",children:[(0,i.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,i.jsx)("h3",{children:"Error Loading Notes"}),(0,i.jsx)("p",{children:o}),(0,i.jsxs)("button",{onClick:u,className:"retry-btn",children:[(0,i.jsx)("i",{className:"fas fa-redo"})," Try Again"]})]}),(0,i.jsxs)("main",{className:"pdf-container",children:[!r&&!o&&(0,i.jsxs)("div",{className:"stats-bar",children:[(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("i",{className:"fas fa-book"}),(0,i.jsx)("span",{className:"stat-number",children:a.length}),(0,i.jsx)("span",{className:"stat-label",children:"Total Notes"})]}),(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("i",{className:"fas fa-download"}),(0,i.jsx)("span",{className:"stat-number",children:b}),(0,i.jsx)("span",{className:"stat-label",children:"Total Downloads"})]}),(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("i",{className:"fas fa-users"}),(0,i.jsx)("span",{className:"stat-number",children:w}),(0,i.jsx)("span",{className:"stat-label",children:"Contributors"})]})]}),!r&&!o&&a.length>0&&(0,i.jsxs)("div",{className:"filter-bar",children:[(0,i.jsxs)("div",{className:"search-box",children:[(0,i.jsx)("i",{className:"fas fa-search"}),(0,i.jsx)("input",{type:"text",placeholder:"Search notes by title, description, or tags...",value:h,onChange:s=>m(s.target.value)})]}),(0,i.jsx)("div",{className:"category-filter",children:(0,i.jsxs)("select",{value:x,onChange:s=>j(s.target.value),children:[(0,i.jsx)("option",{value:"",children:"All Categories"}),v.map(s=>(0,i.jsx)("option",{value:s,children:s},s))]})})]}),!r&&!o&&(0,i.jsx)(i.Fragment,{children:0===p.length?(0,i.jsxs)("div",{className:"empty-state",children:[(0,i.jsx)("i",{className:"fas fa-file-alt"}),(0,i.jsx)("h3",{children:0===a.length?"No Notes Available in Database":"No Notes Match Your Search"}),(0,i.jsx)("p",{children:0===a.length?"Be the first to share your study materials!":"Try a different search or category filter"}),(0,i.jsxs)("button",{onClick:N,className:"contribute-btn",children:[(0,i.jsx)("i",{className:"fas fa-plus-circle"})," Share Your Notes"]})]}):(0,i.jsx)("div",{className:"pdf-grid",children:p.map(s=>{var a;return(0,i.jsxs)("div",{className:"pdf-card",onClick:()=>f(s),children:[(0,i.jsxs)("div",{className:"pdf-card-image",children:[s.thumbnail?(0,i.jsx)("img",{src:"http://localhost:5000".concat(s.thumbnail),alt:s.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=400&auto=format&fit=crop"}}):(0,i.jsx)("div",{className:"pdf-default-thumbnail",children:(0,i.jsx)("i",{className:"fas fa-file-pdf"})}),s.isFree&&(0,i.jsx)("span",{className:"free-badge",children:"FREE"})]}),(0,i.jsxs)("div",{className:"pdf-card-header",children:[(0,i.jsx)("span",{className:"pdf-category",children:s.category||"Uncategorized"}),(0,i.jsxs)("span",{className:"pdf-downloads",children:[(0,i.jsx)("i",{className:"fas fa-download"})," ",s.downloads||0]})]}),(0,i.jsxs)("div",{className:"pdf-card-body",children:[(0,i.jsx)("h3",{className:"pdf-title",children:s.title}),(0,i.jsx)("p",{className:"pdf-desc",children:s.description||"No description available"}),(0,i.jsxs)("div",{className:"pdf-meta",children:[(0,i.jsxs)("div",{className:"meta-item",children:[(0,i.jsx)("i",{className:"fas fa-user"}),(0,i.jsx)("span",{children:s.authorName||(null===(a=s.author)||void 0===a?void 0:a.fullName)||"Unknown Author"})]}),(0,i.jsxs)("div",{className:"meta-item",children:[(0,i.jsx)("i",{className:"fas fa-calendar"}),(0,i.jsx)("span",{children:g(s.createdAt)})]}),s.pages&&s.pages>0&&(0,i.jsxs)("div",{className:"meta-item",children:[(0,i.jsx)("i",{className:"fas fa-file"}),(0,i.jsxs)("span",{children:[s.pages," pages"]})]})]}),s.tags&&s.tags.length>0&&(0,i.jsxs)("div",{className:"pdf-tags",children:[s.tags.slice(0,3).map((s,a)=>(0,i.jsx)("span",{className:"tag",children:s},a)),s.tags.length>3&&(0,i.jsxs)("span",{className:"tag",children:["+",s.tags.length-3," more"]})]}),s.rating>0&&(0,i.jsxs)("div",{className:"pdf-rating",children:[(0,i.jsx)("div",{className:"stars",children:[...Array(5)].map((a,e)=>(0,i.jsx)("i",{className:"fas fa-star ".concat(e<Math.floor(s.rating)?"active":"")},e))}),(0,i.jsx)("span",{className:"rating-text",children:s.rating.toFixed(1)})]})]}),(0,i.jsxs)("div",{className:"pdf-card-footer",children:[(0,i.jsxs)("button",{className:"pdf-btn view-btn",onClick:a=>{a.stopPropagation(),f(s)},children:[(0,i.jsx)("i",{className:"fas fa-eye"})," View"]}),s.externalUrl&&(0,i.jsxs)("button",{className:"pdf-btn download-btn",onClick:a=>{a.stopPropagation(),window.open(s.externalUrl,"_blank")},children:[(0,i.jsx)("i",{className:"fas fa-download"})," Download"]})]})]},s._id)})})})]}),!r&&!o&&(0,i.jsx)("section",{className:"contribute-section",children:(0,i.jsxs)("div",{className:"contribute-container",children:[(0,i.jsxs)("div",{className:"contribute-content",children:[(0,i.jsx)("div",{className:"contribute-icon",children:(0,i.jsx)("i",{className:"fas fa-hand-holding-heart"})}),(0,i.jsx)("h2",{children:"Contribute to E-Siksha"}),(0,i.jsx)("p",{children:"Share your notes and study materials with fellow learners. Help build a comprehensive library of educational resources for everyone."}),(0,i.jsxs)("div",{className:"contribute-stats",children:[(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("h3",{children:a.filter(s=>"published"===s.status).length}),(0,i.jsx)("p",{children:"Published Notes"})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("h3",{children:b}),(0,i.jsx)("p",{children:"Total Downloads"})]})]}),(0,i.jsxs)("button",{className:"contribute-btn",onClick:N,children:[(0,i.jsx)("i",{className:"fas fa-plus-circle"})," Share Your Notes"]})]}),(0,i.jsx)("div",{className:"contribute-image",children:(0,i.jsx)("img",{src:"https://images.unsplash.com/photo-1455587734955-081b22074882?w=600&auto=format&fit=crop",alt:"Contribute"})})]})}),(0,i.jsx)("footer",{children:(0,i.jsxs)("div",{className:"copyright",children:[(0,i.jsx)("p",{children:"\xa9 2025 E Siksha. All rights reserved."}),!r&&!o&&(0,i.jsxs)("p",{className:"db-info",children:[(0,i.jsx)("i",{className:"fas fa-database"})," Connected to MongoDB: ",a.length," notes loaded from database"]})]})})]})}}}]);
//# sourceMappingURL=372.107bb864.chunk.js.map