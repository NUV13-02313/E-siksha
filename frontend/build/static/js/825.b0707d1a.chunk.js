"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[825],{302(e,s,a){a.d(s,{A:()=>n});var t=a(43),r=a(368),o=a(579);const n=function(e){var s;let{showProfile:a=!0}=e;const n=(0,r.Zp)(),[c,i]=(0,t.useState)(null),[l,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=localStorage.getItem("user");e&&i(JSON.parse(e))},[]);const u=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U";return(0,o.jsxs)("header",{className:"navbar",children:[(0,o.jsx)("div",{className:"nav-left",children:(0,o.jsx)("div",{className:"logo",onClick:()=>n("/"),children:(0,o.jsx)("img",{src:"/img/logo.png",alt:"E Siksha Logo"})})}),(0,o.jsx)("div",{className:"nav-right",children:a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("nav",{className:"nav-links",children:[(0,o.jsx)("button",{className:"nav-link",onClick:()=>n("/"),children:"Home"}),(0,o.jsx)("button",{className:"nav-link",onClick:()=>n("/list"),children:"Courses"}),(0,o.jsx)("button",{className:"nav-link",onClick:()=>n("/pdf"),children:"Notes"}),(0,o.jsx)("button",{className:"nav-link",onClick:()=>n("/about"),children:"About"})]}),c?(0,o.jsxs)("div",{className:"user-profile",onClick:()=>d(!l),children:[c.avatar?(0,o.jsx)("img",{src:c.avatar,alt:c.fullName,className:"user-avatar"}):(0,o.jsx)("div",{className:"avatar-placeholder",children:u(c.fullName)}),(0,o.jsx)("span",{className:"user-name",children:(null===(s=c.fullName)||void 0===s?void 0:s.split(" ")[0])||"User"}),(0,o.jsx)("i",{className:"fas fa-chevron-".concat(l?"up":"down")}),l&&(0,o.jsxs)("div",{className:"dropdown-menu",children:[(0,o.jsx)("div",{className:"dropdown-header",children:(0,o.jsxs)("div",{className:"user-info",children:[c.avatar?(0,o.jsx)("img",{src:c.avatar,alt:c.fullName}):(0,o.jsx)("div",{className:"avatar-small",children:u(c.fullName)}),(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:c.fullName}),(0,o.jsx)("span",{children:c.email})]})]})}),(0,o.jsx)("div",{className:"dropdown-divider"}),(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>{(()=>{const e=localStorage.getItem("user");e?"admin"===JSON.parse(e).role?n("/admin"):n("/dashboard"):n("/login")})(),d(!1)},children:[(0,o.jsx)("i",{className:"fas fa-tachometer-alt"}),"Dashboard"]}),(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>{n("/add-content"),d(!1)},children:[(0,o.jsx)("i",{className:"fas fa-plus-circle"}),"Add Content"]}),(0,o.jsxs)("button",{className:"dropdown-item",onClick:()=>{n("/profile"),d(!1)},children:[(0,o.jsx)("i",{className:"fas fa-user-cog"}),"Edit Profile"]}),(0,o.jsx)("div",{className:"dropdown-divider"}),(0,o.jsxs)("button",{className:"dropdown-item logout",onClick:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),i(null),d(!1),n("/login")},children:[(0,o.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]})]}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("button",{className:"btn btn-primary",onClick:()=>n("/reg"),children:[(0,o.jsx)("i",{className:"fas fa-user-plus"}),"Sign Up"]})})]}):(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>n("/login"),children:"Get Started"})})]})}},768(e,s,a){a.d(s,{CS:()=>j,DA:()=>m,DY:()=>c,E0:()=>h,Fj:()=>f,K3:()=>v,Lx:()=>i,NJ:()=>u,cs:()=>g,dE:()=>w,lo:()=>y,mc:()=>p,nI:()=>N,pU:()=>k,r7:()=>l,tO:()=>d,vE:()=>b,vW:()=>x});var t=a(555),r=a(722);const o="https://e-siksha-mljg.onrender.com/api",n=r.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const c=async e=>{try{const s=await n.post("/register",e);return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data}catch(t){var s,a;throw console.error("Registration error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Registration failed"}}},i=async e=>{try{const s=await n.post("/login",e);return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data}catch(t){var s,a;throw console.error("Login error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Login failed"}}},l=async e=>{try{const s=new FormData;Object.keys(e).forEach(a=>{"skills"===a&&Array.isArray(e[a])?s.append(a,JSON.stringify(e[a])):("avatar"===a&&(e[a],File),s.append(a,e[a]))});const a=localStorage.getItem("token"),r=await fetch("".concat(o,"/user/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:s}),n=await r.json();if(!r.ok)throw n;if(n.user){const e=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify((0,t.A)((0,t.A)({},e),n.user)))}return n}catch(a){var s;throw console.error("Update profile error:",a),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to update profile"}}},d=async()=>{try{return(await n.get("/user/dashboard")).data}catch(a){var e,s;throw console.error("Dashboard error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load dashboard"}}},u=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await n.get("/courses",{params:e})).data}catch(t){var s,a;throw console.error("Get courses error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load courses"}}},h=async e=>{try{return(await n.get("/courses/".concat(e))).data}catch(t){var s,a;throw console.error("Get course error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load course"}}},m=async e=>{try{return(await n.post("/courses/".concat(e,"/enroll"))).data}catch(t){var s,a;throw console.error("Enroll error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to enroll in course"}}},v=async(e,s)=>{try{return(await n.post("/courses/".concat(e,"/progress"),s)).data}catch(r){var a,t;throw console.error("Progress error:",(null===(a=r.response)||void 0===a?void 0:a.data)||r.message),(null===(t=r.response)||void 0===t?void 0:t.data)||{success:!1,message:"Failed to update progress"}}},p=async e=>{try{const s=localStorage.getItem("token"),a=await fetch("".concat(o,"/courses/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(s)},body:e}),t=await a.json();if(!a.ok)throw t;return t}catch(s){throw console.error("Submit course error:",s),s}},g=async e=>{try{const s=localStorage.getItem("token"),a=await fetch("".concat(o,"/notes/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(s)},body:e}),t=await a.json();if(!a.ok)throw t;return t}catch(s){throw console.error("Error submitting notes:",s),s}},j=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await n.get("/notes",{params:e})).data}catch(t){var s,a;throw console.error("Get notes error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load notes"}}},x=async e=>{try{return(await n.get("/notes/".concat(e))).data}catch(t){var s,a;throw console.error("Get note error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load note"}}},f=async()=>{try{return(await n.get("/admin/pending")).data}catch(a){var e,s;throw console.error("Pending content error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load pending content"}}},N=async function(e,s,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{return(await n.post("/admin/content/".concat(e,"/").concat(s,"/approve"),{action:a,reason:t})).data}catch(c){var r,o;throw console.error("Approve content error:",(null===(r=c.response)||void 0===r?void 0:r.data)||c.message),(null===(o=c.response)||void 0===o?void 0:o.data)||{success:!1,message:"Failed to process content"}}},w=async()=>{try{return(await n.get("/admin/stats")).data}catch(a){var e,s;throw console.error("Admin stats error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load stats"}}},y=async()=>{try{return(await n.get("/admin/users")).data}catch(a){var e,s;throw console.error("Get users error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load users"}}},b=async function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const t=localStorage.getItem("token");if(!t)throw new Error("No authentication token found");const r=await fetch("".concat(o,"/admin/").concat(e,"/").concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({reason:a})}),n=await r.json();if(!r.ok)throw new Error(n.message||"Failed to delete ".concat(e));return n}catch(t){throw console.error("Error deleting ".concat(e,":"),t),t}},k=async(e,s)=>{try{const a=localStorage.getItem("token");if(!a)throw new Error("No authentication token found");const t=await fetch("".concat(o,"/admin/users/").concat(e,"/status"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({isActive:s})}),r=await t.json();if(!t.ok)throw new Error(r.message||"Failed to update user status");return r}catch(a){throw console.error("Error updating user status:",a),a}}},825(e,s,a){a.r(s),a.d(s,{default:()=>i});var t=a(43),r=a(368),o=a(302),n=a(768),c=a(579);const i=function(){const e=(0,r.Zp)(),[s,a]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[d,u]=(0,t.useState)(null),[h,m]=(0,t.useState)(""),[v,p]=(0,t.useState)(""),[g,j]=(0,t.useState)("");(0,t.useEffect)(()=>{x()},[]);const x=async()=>{try{l(!0);const e=await(0,n.NJ)();e.success?(console.log("Fetched courses:",e.courses),a(e.courses||[])):u(e.message||"Failed to fetch courses")}catch(e){console.error("Error fetching courses:",e),u(e.message||"Failed to load courses. Please try again later.")}finally{l(!1)}},f=s.filter(e=>{var s,a;const t=""===h||e.title.toLowerCase().includes(h.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(h.toLowerCase()))||(null===(a=e.tags)||void 0===a?void 0:a.some(e=>e.toLowerCase().includes(h.toLowerCase()))),r=""===v||e.category===v,o=""===g||e.level===g;return t&&r&&o}),N=[...new Set(s.map(e=>e.category).filter(Boolean))].sort(),w=[...new Set(s.map(e=>e.level).filter(Boolean))].sort(),y=e=>e.isFree?"free":e.studentsEnrolled>1e4?"popular":"new";return(0,c.jsxs)("div",{className:"list-wrapper",children:[(0,c.jsx)(o.A,{}),(0,c.jsxs)("section",{className:"hero",children:[(0,c.jsx)("h1",{children:"Explore Our Courses"}),(0,c.jsxs)("p",{children:["Discover ",s.length,"+ high-quality courses taught by industry experts. Start learning today!"]})]}),i&&(0,c.jsxs)("div",{className:"loading-container",children:[(0,c.jsx)("div",{className:"spinner"}),(0,c.jsx)("p",{children:"Loading courses from database..."})]}),d&&!i&&(0,c.jsxs)("div",{className:"error-container",children:[(0,c.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,c.jsx)("h3",{children:"Error Loading Courses"}),(0,c.jsx)("p",{children:d}),(0,c.jsxs)("button",{onClick:x,className:"retry-btn",children:[(0,c.jsx)("i",{className:"fas fa-redo"})," Try Again"]})]}),(0,c.jsxs)("div",{className:"main-container",children:[!i&&!d&&s.length>0&&(0,c.jsxs)("div",{className:"filter-bar",children:[(0,c.jsxs)("div",{className:"search-box",children:[(0,c.jsx)("i",{className:"fas fa-search"}),(0,c.jsx)("input",{type:"text",placeholder:"Search courses by title, description, or tags...",value:h,onChange:e=>m(e.target.value)})]}),(0,c.jsxs)("div",{className:"filter-group",children:[(0,c.jsxs)("select",{value:v,onChange:e=>p(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"All Categories"}),N.map(e=>(0,c.jsx)("option",{value:e,children:e},e))]}),(0,c.jsxs)("select",{value:g,onChange:e=>j(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"All Levels"}),w.map(e=>(0,c.jsx)("option",{value:e,children:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")},e))]})]})]}),(0,c.jsx)("main",{className:"course-listing",children:(0,c.jsx)("div",{className:"course-grid",children:0!==f.length||i?f.map(s=>{var a,t,r;return(0,c.jsxs)("div",{className:"course-card",children:[(0,c.jsxs)("div",{className:"course-image",children:[(0,c.jsx)("img",{src:null!==(a=s.thumbnail)&&void 0!==a&&a.startsWith("http")?s.thumbnail:"http://localhost:5000".concat(s.thumbnail),alt:s.title,onError:e=>{e.target.onerror=null,e.target.src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=600&auto=format&fit=crop"}}),y(s)&&(0,c.jsx)("div",{className:"badge ".concat(y(s)),children:y(s).toUpperCase()})]}),(0,c.jsxs)("div",{className:"course-content",children:[(0,c.jsx)("div",{className:"course-category",children:s.category}),(0,c.jsx)("h3",{className:"course-title",children:s.title}),(0,c.jsx)("p",{className:"course-description",children:s.description}),(0,c.jsxs)("div",{className:"course-meta",children:[(0,c.jsxs)("div",{className:"meta-item",children:[(0,c.jsx)("i",{className:"fas fa-clock"}),(0,c.jsx)("span",{children:s.duration||"10 hours"})]}),(0,c.jsxs)("div",{className:"meta-item",children:[(0,c.jsx)("i",{className:"fas fa-chart-line"}),(0,c.jsx)("span",{children:null===(t=s.level)||void 0===t?void 0:t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")})]}),(0,c.jsxs)("div",{className:"meta-item",children:[(0,c.jsx)("i",{className:"fas fa-layer-group"}),(0,c.jsxs)("span",{children:[(null===(r=s.modules)||void 0===r?void 0:r.length)||0," modules"]})]})]}),(0,c.jsxs)("div",{className:"course-footer",children:[(0,c.jsxs)("div",{className:"instructor",children:[(0,c.jsx)("i",{className:"fas fa-user"}),(0,c.jsx)("span",{children:s.instructorName||"Instructor"})]}),(0,c.jsx)("button",{className:"view-btn",onClick:()=>{return a=s._id,void e("/course/".concat(a));var a},children:"View Details"})]})]})]},s._id)}):(0,c.jsxs)("div",{className:"empty-state",children:[(0,c.jsx)("i",{className:"fas fa-graduation-cap"}),(0,c.jsx)("h3",{children:0===s.length?"No Courses Available":"No Courses Match Your Search"}),(0,c.jsx)("p",{children:0===s.length?"Check back soon for new courses!":"Try a different search or filter"})]})})})]}),!i&&!d&&(0,c.jsx)("section",{className:"contribute-section",children:(0,c.jsxs)("div",{className:"contribute-container",children:[(0,c.jsxs)("div",{className:"contribute-content",children:[(0,c.jsx)("div",{className:"contribute-icon",children:(0,c.jsx)("i",{className:"fas fa-chalkboard-teacher"})}),(0,c.jsx)("h2",{children:"Become an Instructor"}),(0,c.jsx)("p",{children:"Share your knowledge and expertise with thousands of learners. Create courses, tutorials, and help shape the future of education."}),(0,c.jsxs)("div",{className:"contribute-stats",children:[(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("i",{className:"fas fa-graduation-cap"}),(0,c.jsxs)("span",{children:[s.length,"+"]}),(0,c.jsx)("p",{children:"Courses Available"})]}),(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("i",{className:"fas fa-star"}),(0,c.jsxs)("span",{children:[(s.reduce((e,s)=>e+(s.rating||4.5),0)/s.length||4.8).toFixed(1),"/5"]}),(0,c.jsx)("p",{children:"Average Rating"})]}),(0,c.jsxs)("div",{className:"stat-item",children:[(0,c.jsx)("i",{className:"fas fa-globe"}),(0,c.jsx)("span",{children:"Global"}),(0,c.jsx)("p",{children:"Community"})]})]}),(0,c.jsxs)("button",{className:"contribute-btn",onClick:()=>{e("/add-content/course")},children:[(0,c.jsx)("i",{className:"fas fa-plus-circle"})," Create a Course"]})]}),(0,c.jsx)("div",{className:"contribute-image",children:(0,c.jsx)("img",{src:"https://images.unsplash.com/photo-1659301254614-8d6a9d46f26a?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Teach"})})]})}),(0,c.jsx)("footer",{className:"login-footer",children:(0,c.jsxs)("div",{className:"footer-content",children:[(0,c.jsx)("p",{children:"\xa9 2025 E Siksha. All rights reserved."}),!i&&!d&&(0,c.jsxs)("p",{className:"db-info",children:[(0,c.jsx)("i",{className:"fas fa-database"})," Connected to MongoDB: ",s.length," courses loaded"]})]})})]})}}}]);
//# sourceMappingURL=825.b0707d1a.chunk.js.map