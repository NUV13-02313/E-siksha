"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[115],{115(s,e,a){a.r(e),a.d(e,{default:()=>c});var t=a(43),n=a(368),r=a(768),i=a(302),l=a(579);const c=function(){const s=(0,n.Zp)(),[e,a]=(0,t.useState)(null),[c,o]=(0,t.useState)("pending"),[d,h]=(0,t.useState)([]),[m,u]=(0,t.useState)([]),[j,x]=(0,t.useState)([]),[v,p]=(0,t.useState)([]),[N,g]=(0,t.useState)([]),[f,b]=(0,t.useState)(null),[y,w]=(0,t.useState)(!0),[k,C]=(0,t.useState)(null),[A,S]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("token");if(!e||!t)return alert("Please login to access admin dashboard"),void s("/login");const n=JSON.parse(e);if(a(n),"admin"!==n.role)return alert("Access denied. Admin privileges required."),void s("/");E()},[]);const E=async()=>{try{w(!0),C(null);const[s,e,a,t,n]=await Promise.all([(0,r.Fj)(),(0,r.NJ)({page:1,limit:100}),(0,r.CS)({page:1,limit:100}),(0,r.dE)(),(0,r.lo)()]);s.success&&(h(s.courses||[]),u(s.notes||[])),e.success&&x(e.courses||[]),a.success&&p(a.notes||[]),t.success&&b(t.stats),n.success&&g(n.users||[])}catch(s){console.error("Error fetching admin data:",s),C(s.message||"Failed to load admin data. Please try again.")}finally{w(!1)}},I=async function(s,e,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{S(!0);const n=await(0,r.nI)(e,s,a,t);if(!n.success)throw new Error(n.message||"Action failed");alert("Content ".concat(a,"d successfully!")),E()}catch(n){console.error("".concat(a," content error:"),n),alert(n.message||"Failed to ".concat(a," content"))}finally{S(!1)}},U=()=>{s("/add-content/course")},F=()=>{s("/add-content/notes")},P=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",D=s=>{switch(null===s||void 0===s?void 0:s.toLowerCase()){case"published":return"published";case"pending":default:return"pending";case"rejected":return"rejected";case"draft":return"draft"}};return y?(0,l.jsxs)("div",{className:"admin-loading",children:[(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)("p",{children:"Loading admin dashboard..."})]}):k?(0,l.jsxs)("div",{className:"admin-error",children:[(0,l.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,l.jsx)("h3",{children:"Admin Dashboard Error"}),(0,l.jsx)("p",{children:k}),(0,l.jsxs)("button",{onClick:E,className:"retry-btn",children:[(0,l.jsx)("i",{className:"fas fa-redo"})," Retry"]})]}):(0,l.jsxs)("div",{className:"admin-dashboard",children:[(0,l.jsx)(i.A,{}),(0,l.jsxs)("div",{className:"admin-container",children:[(0,l.jsxs)("div",{className:"admin-sidebar",children:[(0,l.jsxs)("div",{className:"admin-header",children:[(0,l.jsx)("h2",{children:"Admin Dashboard"}),(0,l.jsxs)("div",{className:"admin-user",children:[(0,l.jsx)("i",{className:"fas fa-user-shield"}),(0,l.jsx)("span",{children:null===e||void 0===e?void 0:e.fullName})]})]}),(0,l.jsxs)("div",{className:"admin-stats",children:[(0,l.jsxs)("div",{className:"stat-card",children:[(0,l.jsx)("i",{className:"fas fa-chalkboard-teacher"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:(null===f||void 0===f?void 0:f.publishedCourses)||0}),(0,l.jsx)("p",{children:"Published Courses"})]})]}),(0,l.jsxs)("div",{className:"stat-card",children:[(0,l.jsx)("i",{className:"fas fa-file-alt"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:(null===f||void 0===f?void 0:f.publishedNotes)||0}),(0,l.jsx)("p",{children:"Published Notes"})]})]}),(0,l.jsxs)("div",{className:"stat-card",children:[(0,l.jsx)("i",{className:"fas fa-clock"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:((null===f||void 0===f?void 0:f.pendingCourses)||0)+((null===f||void 0===f?void 0:f.pendingNotes)||0)}),(0,l.jsx)("p",{children:"Pending Approval"})]})]}),(0,l.jsxs)("div",{className:"stat-card",children:[(0,l.jsx)("i",{className:"fas fa-users"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:(null===f||void 0===f?void 0:f.totalUsers)||0}),(0,l.jsx)("p",{children:"Total Users"})]})]})]}),(0,l.jsxs)("nav",{className:"admin-nav",children:[(0,l.jsxs)("button",{className:"nav-btn ".concat("pending"===c?"active":""),onClick:()=>o("pending"),children:[(0,l.jsx)("i",{className:"fas fa-clock"})," Pending Approval",(0,l.jsx)("span",{className:"badge",children:d.length+m.length})]}),(0,l.jsxs)("button",{className:"nav-btn ".concat("courses"===c?"active":""),onClick:()=>o("courses"),children:[(0,l.jsx)("i",{className:"fas fa-chalkboard-teacher"})," Manage Courses"]}),(0,l.jsxs)("button",{className:"nav-btn ".concat("notes"===c?"active":""),onClick:()=>o("notes"),children:[(0,l.jsx)("i",{className:"fas fa-file-alt"})," Manage Notes"]}),(0,l.jsxs)("button",{className:"nav-btn ".concat("users"===c?"active":""),onClick:()=>o("users"),children:[(0,l.jsx)("i",{className:"fas fa-users"})," Manage Users"]}),(0,l.jsxs)("button",{className:"nav-btn ".concat("add"===c?"active":""),onClick:()=>o("add"),children:[(0,l.jsx)("i",{className:"fas fa-plus-circle"})," Add Content"]}),(0,l.jsxs)("button",{className:"nav-btn ".concat("analytics"===c?"active":""),onClick:()=>o("analytics"),children:[(0,l.jsx)("i",{className:"fas fa-chart-line"})," Analytics"]}),(0,l.jsxs)("button",{className:"nav-btn logout-btn",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s("/login")},children:[(0,l.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})]})]}),(0,l.jsxs)("div",{className:"admin-main",children:["pending"===c&&(0,l.jsxs)("div",{className:"pending-tab",children:[(0,l.jsxs)("div",{className:"tab-header",children:[(0,l.jsx)("h2",{children:"Content Awaiting Approval"}),(0,l.jsx)("div",{className:"tab-actions",children:(0,l.jsxs)("button",{className:"btn btn-primary",onClick:E,children:[(0,l.jsx)("i",{className:"fas fa-sync-alt"})," Refresh"]})})]}),(0,l.jsxs)("div",{className:"content-sections",children:[(0,l.jsxs)("div",{className:"pending-section",children:[(0,l.jsxs)("h3",{children:[(0,l.jsx)("i",{className:"fas fa-chalkboard-teacher"})," Courses (",d.length,")"]}),d.length>0?(0,l.jsx)("div",{className:"pending-list",children:d.map(s=>{var e;return(0,l.jsxs)("div",{className:"pending-item",children:[(0,l.jsxs)("div",{className:"item-info",children:[(0,l.jsx)("h4",{children:s.title}),(0,l.jsxs)("p",{className:"author",children:["By ",s.instructorName||"Unknown Instructor"]}),(0,l.jsxs)("p",{className:"date",children:["Submitted: ",P(s.createdAt)]}),(0,l.jsxs)("p",{className:"description",children:[null===(e=s.description)||void 0===e?void 0:e.substring(0,100),"..."]})]}),(0,l.jsx)("div",{className:"item-preview",children:s.thumbnail&&(0,l.jsx)("img",{src:s.thumbnail.startsWith("http")?s.thumbnail:"http://localhost:5000".concat(s.thumbnail),alt:s.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=200&auto=format&fit=crop"}})}),(0,l.jsxs)("div",{className:"item-actions",children:[(0,l.jsxs)("button",{className:"btn-approve",onClick:()=>I(s._id,"course","approve"),disabled:A,children:[(0,l.jsx)("i",{className:"fas fa-check"})," Approve"]}),(0,l.jsxs)("button",{className:"btn-reject",onClick:()=>{const e=prompt("Please provide rejection reason:");e&&I(s._id,"course","reject",e)},disabled:A,children:[(0,l.jsx)("i",{className:"fas fa-times"})," Reject"]})]})]},s._id)})}):(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("i",{className:"fas fa-check-circle"}),(0,l.jsx)("p",{children:"No pending courses to review"})]})]}),(0,l.jsxs)("div",{className:"pending-section",children:[(0,l.jsxs)("h3",{children:[(0,l.jsx)("i",{className:"fas fa-file-alt"})," Notes (",m.length,")"]}),m.length>0?(0,l.jsx)("div",{className:"pending-list",children:m.map(s=>{var e;return(0,l.jsxs)("div",{className:"pending-item",children:[(0,l.jsxs)("div",{className:"item-info",children:[(0,l.jsx)("h4",{children:s.title}),(0,l.jsxs)("p",{className:"author",children:["By ",s.authorName||"Unknown Author"]}),(0,l.jsxs)("p",{className:"date",children:["Submitted: ",P(s.createdAt)]}),(0,l.jsxs)("p",{className:"description",children:[null===(e=s.description)||void 0===e?void 0:e.substring(0,100),"..."]})]}),(0,l.jsx)("div",{className:"item-preview",children:s.thumbnail&&(0,l.jsx)("img",{src:s.thumbnail.startsWith("http")?s.thumbnail:"http://localhost:5000".concat(s.thumbnail),alt:s.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=200&auto=format&fit=crop"}})}),(0,l.jsxs)("div",{className:"item-actions",children:[(0,l.jsxs)("button",{className:"btn-approve",onClick:()=>I(s._id,"notes","approve"),disabled:A,children:[(0,l.jsx)("i",{className:"fas fa-check"})," Approve"]}),(0,l.jsxs)("button",{className:"btn-reject",onClick:()=>{const e=prompt("Please provide rejection reason:");e&&I(s._id,"notes","reject",e)},disabled:A,children:[(0,l.jsx)("i",{className:"fas fa-times"})," Reject"]})]})]},s._id)})}):(0,l.jsxs)("div",{className:"empty-state",children:[(0,l.jsx)("i",{className:"fas fa-check-circle"}),(0,l.jsx)("p",{children:"No pending notes to review"})]})]})]})]}),"courses"===c&&(0,l.jsxs)("div",{className:"courses-tab",children:[(0,l.jsxs)("div",{className:"tab-header",children:[(0,l.jsx)("h2",{children:"Manage Courses"}),(0,l.jsxs)("button",{className:"btn btn-primary",onClick:U,children:[(0,l.jsx)("i",{className:"fas fa-plus"})," Add New Course"]})]}),(0,l.jsx)("div",{className:"content-table",children:(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Title"}),(0,l.jsx)("th",{children:"Author"}),(0,l.jsx)("th",{children:"Category"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Students"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:j.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"table-title",children:[e.thumbnail&&(0,l.jsx)("img",{src:e.thumbnail.startsWith("http")?e.thumbnail:"http://localhost:5000".concat(e.thumbnail),alt:e.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=50&auto=format&fit=crop"}}),e.title]})}),(0,l.jsx)("td",{children:e.instructorName||"N/A"}),(0,l.jsx)("td",{children:e.category}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"status-badge ".concat(D(e.status)),children:e.status})}),(0,l.jsx)("td",{children:(e.studentsEnrolled||0).toLocaleString()}),(0,l.jsxs)("td",{className:"actions",children:[(0,l.jsx)("button",{className:"btn-view",onClick:()=>s("/course/".concat(e._id)),title:"View Course",children:(0,l.jsx)("i",{className:"fas fa-eye"})}),(0,l.jsx)("button",{className:"btn-edit",onClick:()=>alert("Edit functionality coming soon"),title:"Edit Course",children:(0,l.jsx)("i",{className:"fas fa-edit"})}),(0,l.jsx)("button",{className:"btn-delete",onClick:()=>{window.confirm("Are you sure you want to delete this course?")&&alert("Delete functionality coming soon")},title:"Delete Course",children:(0,l.jsx)("i",{className:"fas fa-trash"})})]})]},e._id))})]})})]}),"notes"===c&&(0,l.jsxs)("div",{className:"notes-tab",children:[(0,l.jsxs)("div",{className:"tab-header",children:[(0,l.jsx)("h2",{children:"Manage Notes"}),(0,l.jsxs)("button",{className:"btn btn-primary",onClick:F,children:[(0,l.jsx)("i",{className:"fas fa-plus"})," Add New Notes"]})]}),(0,l.jsx)("div",{className:"content-table",children:(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Title"}),(0,l.jsx)("th",{children:"Author"}),(0,l.jsx)("th",{children:"Category"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Downloads"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:v.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"table-title",children:[e.thumbnail&&(0,l.jsx)("img",{src:e.thumbnail.startsWith("http")?e.thumbnail:"http://localhost:5000".concat(e.thumbnail),alt:e.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=50&auto=format&fit=crop"}}),e.title]})}),(0,l.jsx)("td",{children:e.authorName||"N/A"}),(0,l.jsx)("td",{children:e.category}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"status-badge ".concat(D(e.status)),children:e.status})}),(0,l.jsx)("td",{children:(e.downloads||0).toLocaleString()}),(0,l.jsxs)("td",{className:"actions",children:[(0,l.jsx)("button",{className:"btn-view",onClick:()=>s("/pdf/viewer/".concat(e._id)),title:"View Notes",children:(0,l.jsx)("i",{className:"fas fa-eye"})}),(0,l.jsx)("button",{className:"btn-edit",onClick:()=>alert("Edit functionality coming soon"),title:"Edit Notes",children:(0,l.jsx)("i",{className:"fas fa-edit"})}),(0,l.jsx)("button",{className:"btn-delete",onClick:()=>{window.confirm("Are you sure you want to delete these notes?")&&alert("Delete functionality coming soon")},title:"Delete Notes",children:(0,l.jsx)("i",{className:"fas fa-trash"})}),(0,l.jsx)("button",{className:"btn-download",onClick:()=>{e.externalUrl?window.open(e.externalUrl,"_blank"):alert("No download link available")},title:"Download",children:(0,l.jsx)("i",{className:"fas fa-download"})})]})]},e._id))})]})})]}),"users"===c&&(0,l.jsxs)("div",{className:"users-tab",children:[(0,l.jsxs)("div",{className:"tab-header",children:[(0,l.jsx)("h2",{children:"User Management"}),(0,l.jsxs)("div",{className:"user-stats",children:[(0,l.jsxs)("span",{children:["Total Users: ",N.length]}),(0,l.jsxs)("span",{children:["Active: ",N.filter(s=>s.isActive).length]}),(0,l.jsxs)("span",{children:["Admins: ",N.filter(s=>"admin"===s.role).length]})]})]}),(0,l.jsx)("div",{className:"content-table",children:(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Name"}),(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Role"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Joined"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:N.map(s=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"user-info",children:[s.avatar?(0,l.jsx)("img",{src:s.avatar.startsWith("http")?s.avatar:"http://localhost:5000".concat(s.avatar),alt:s.fullName,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop"}}):(0,l.jsx)("div",{className:"user-avatar",children:s.fullName.charAt(0)}),s.fullName]})}),(0,l.jsx)("td",{children:s.email}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"role-badge ".concat(s.role),children:s.role})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"status-badge ".concat(s.isActive?"published":"rejected"),children:s.isActive?"Active":"Inactive"})}),(0,l.jsx)("td",{children:P(s.createdAt)}),(0,l.jsxs)("td",{className:"actions",children:[(0,l.jsx)("button",{className:"btn-edit",onClick:()=>alert("Edit user functionality coming soon"),title:"Edit User",children:(0,l.jsx)("i",{className:"fas fa-edit"})}),(0,l.jsx)("button",{className:s.isActive?"btn-reject":"btn-approve",onClick:()=>{const e=s.isActive?"deactivate":"activate";window.confirm("Are you sure you want to ".concat(e," this user?"))&&alert("".concat(e.charAt(0).toUpperCase()+e.slice(1)," functionality coming soon"))},title:s.isActive?"Deactivate User":"Activate User",children:(0,l.jsx)("i",{className:"fas ".concat(s.isActive?"fa-user-times":"fa-user-check")})})]})]},s._id))})]})})]}),"add"===c&&(0,l.jsxs)("div",{className:"add-content-tab",children:[(0,l.jsx)("h2",{children:"Add New Content"}),(0,l.jsxs)("div",{className:"content-options",children:[(0,l.jsxs)("div",{className:"option-card",onClick:U,children:[(0,l.jsx)("div",{className:"option-icon",children:(0,l.jsx)("i",{className:"fas fa-chalkboard-teacher"})}),(0,l.jsx)("h3",{children:"Add Course"}),(0,l.jsx)("p",{children:"Create a new course with videos, quizzes, and assignments"}),(0,l.jsx)("button",{className:"btn btn-primary",children:"Create Course"})]}),(0,l.jsxs)("div",{className:"option-card",onClick:F,children:[(0,l.jsx)("div",{className:"option-icon",children:(0,l.jsx)("i",{className:"fas fa-file-alt"})}),(0,l.jsx)("h3",{children:"Add Notes"}),(0,l.jsx)("p",{children:"Upload PDF notes or create study materials"}),(0,l.jsx)("button",{className:"btn btn-primary",children:"Upload Notes"})]}),(0,l.jsxs)("div",{className:"option-card",children:[(0,l.jsx)("div",{className:"option-icon",children:(0,l.jsx)("i",{className:"fas fa-question-circle"})}),(0,l.jsx)("h3",{children:"Add Quiz"}),(0,l.jsx)("p",{children:"Create assessments and quizzes for courses"}),(0,l.jsx)("button",{className:"btn btn-primary",disabled:!0,children:"Coming Soon"})]})]})]}),"analytics"===c&&(0,l.jsxs)("div",{className:"analytics-tab",children:[(0,l.jsx)("h2",{children:"Platform Analytics"}),(0,l.jsxs)("div",{className:"analytics-grid",children:[(0,l.jsxs)("div",{className:"analytics-card",children:[(0,l.jsx)("h3",{children:"Total Users"}),(0,l.jsx)("div",{className:"analytics-value",children:(null===f||void 0===f?void 0:f.totalUsers)||0}),(0,l.jsxs)("div",{className:"analytics-trend",children:[(0,l.jsx)("i",{className:"fas fa-chart-line"}),(0,l.jsx)("span",{children:"+15% from last month"})]})]}),(0,l.jsxs)("div",{className:"analytics-card",children:[(0,l.jsx)("h3",{children:"Total Courses"}),(0,l.jsx)("div",{className:"analytics-value",children:(null===f||void 0===f?void 0:f.totalCourses)||0}),(0,l.jsxs)("div",{className:"analytics-trend",children:[(0,l.jsx)("i",{className:"fas fa-chart-line"}),(0,l.jsx)("span",{children:"+8% from last month"})]})]}),(0,l.jsxs)("div",{className:"analytics-card",children:[(0,l.jsx)("h3",{children:"Total Notes"}),(0,l.jsx)("div",{className:"analytics-value",children:(null===f||void 0===f?void 0:f.totalNotes)||0}),(0,l.jsxs)("div",{className:"analytics-trend",children:[(0,l.jsx)("i",{className:"fas fa-chart-line"}),(0,l.jsx)("span",{children:"+12% from last month"})]})]}),(0,l.jsxs)("div",{className:"analytics-card",children:[(0,l.jsx)("h3",{children:"Pending Content"}),(0,l.jsx)("div",{className:"analytics-value",children:((null===f||void 0===f?void 0:f.pendingCourses)||0)+((null===f||void 0===f?void 0:f.pendingNotes)||0)}),(0,l.jsxs)("div",{className:"analytics-trend",children:[(0,l.jsx)("i",{className:"fas fa-clock"}),(0,l.jsx)("span",{children:"Requires review"})]})]})]}),(0,l.jsxs)("div",{className:"analytics-chart",children:[(0,l.jsx)("h3",{children:"Content Growth"}),(0,l.jsxs)("div",{className:"chart-placeholder",children:[(0,l.jsx)("i",{className:"fas fa-chart-bar"}),(0,l.jsx)("p",{children:"Interactive charts coming soon"})]})]})]})]})]})]})}},302(s,e,a){a.d(e,{A:()=>i});var t=a(43),n=a(368),r=a(579);const i=function(s){var e;let{showProfile:a=!0}=s;const i=(0,n.Zp)(),[l,c]=(0,t.useState)(null),[o,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const s=localStorage.getItem("user");s&&c(JSON.parse(s))},[]);const h=s=>s?s.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"U";return(0,r.jsxs)("header",{className:"navbar",children:[(0,r.jsx)("div",{className:"nav-left",children:(0,r.jsx)("div",{className:"logo",onClick:()=>i("/"),children:(0,r.jsx)("img",{src:"/img/logo.png",alt:"E Siksha Logo"})})}),(0,r.jsx)("div",{className:"nav-right",children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("nav",{className:"nav-links",children:[(0,r.jsx)("button",{className:"nav-link",onClick:()=>i("/"),children:"Home"}),(0,r.jsx)("button",{className:"nav-link",onClick:()=>i("/list"),children:"Courses"}),(0,r.jsx)("button",{className:"nav-link",onClick:()=>i("/pdf"),children:"Notes"}),(0,r.jsx)("button",{className:"nav-link",onClick:()=>i("/about"),children:"About"})]}),l?(0,r.jsxs)("div",{className:"user-profile",onClick:()=>d(!o),children:[l.avatar?(0,r.jsx)("img",{src:l.avatar,alt:l.fullName,className:"user-avatar"}):(0,r.jsx)("div",{className:"avatar-placeholder",children:h(l.fullName)}),(0,r.jsx)("span",{className:"user-name",children:(null===(e=l.fullName)||void 0===e?void 0:e.split(" ")[0])||"User"}),(0,r.jsx)("i",{className:"fas fa-chevron-".concat(o?"up":"down")}),o&&(0,r.jsxs)("div",{className:"dropdown-menu",children:[(0,r.jsx)("div",{className:"dropdown-header",children:(0,r.jsxs)("div",{className:"user-info",children:[l.avatar?(0,r.jsx)("img",{src:l.avatar,alt:l.fullName}):(0,r.jsx)("div",{className:"avatar-small",children:h(l.fullName)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:l.fullName}),(0,r.jsx)("span",{children:l.email})]})]})}),(0,r.jsx)("div",{className:"dropdown-divider"}),(0,r.jsxs)("button",{className:"dropdown-item",onClick:()=>{(()=>{const s=localStorage.getItem("user");s?"admin"===JSON.parse(s).role?i("/admin"):i("/dashboard"):i("/login")})(),d(!1)},children:[(0,r.jsx)("i",{className:"fas fa-tachometer-alt"}),"Dashboard"]}),(0,r.jsxs)("button",{className:"dropdown-item",onClick:()=>{i("/add-content"),d(!1)},children:[(0,r.jsx)("i",{className:"fas fa-plus-circle"}),"Add Content"]}),(0,r.jsxs)("button",{className:"dropdown-item",onClick:()=>{i("/profile"),d(!1)},children:[(0,r.jsx)("i",{className:"fas fa-user-cog"}),"Edit Profile"]}),(0,r.jsx)("div",{className:"dropdown-divider"}),(0,r.jsxs)("button",{className:"dropdown-item logout",onClick:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),c(null),d(!1),i("/login")},children:[(0,r.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{className:"btn btn-primary",onClick:()=>i("/reg"),children:[(0,r.jsx)("i",{className:"fas fa-user-plus"}),"Sign Up"]})})]}):(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>i("/login"),children:"Get Started"})})]})}},768(s,e,a){a.d(e,{CS:()=>p,DA:()=>u,DY:()=>l,E0:()=>m,Fj:()=>g,K3:()=>j,Lx:()=>c,NJ:()=>h,cs:()=>v,dE:()=>b,lo:()=>y,mc:()=>x,nI:()=>f,r7:()=>o,tO:()=>d,vW:()=>N});var t=a(555),n=a(722);const r="https://e-siksha-mljg.onrender.com/api",i=n.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(s=>{const e=localStorage.getItem("token");return e&&(s.headers.Authorization="Bearer ".concat(e)),s},s=>Promise.reject(s)),i.interceptors.response.use(s=>s,s=>{var e;return 401===(null===(e=s.response)||void 0===e?void 0:e.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(s)});const l=async s=>{try{const e=await i.post("/register",s);return e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user))),e.data}catch(t){var e,a;throw console.error("Registration error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Registration failed"}}},c=async s=>{try{const e=await i.post("/login",s);return e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user))),e.data}catch(t){var e,a;throw console.error("Login error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Login failed"}}},o=async s=>{try{const e=new FormData;Object.keys(s).forEach(a=>{"skills"===a&&Array.isArray(s[a])?e.append(a,JSON.stringify(s[a])):("avatar"===a&&(s[a],File),e.append(a,s[a]))});const a=localStorage.getItem("token"),n=await fetch("".concat(r,"/user/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:e}),i=await n.json();if(!n.ok)throw i;if(i.user){const s=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify((0,t.A)((0,t.A)({},s),i.user)))}return i}catch(a){var e;throw console.error("Update profile error:",a),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to update profile"}}},d=async()=>{try{return(await i.get("/user/dashboard")).data}catch(a){var s,e;throw console.error("Dashboard error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load dashboard"}}},h=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await i.get("/courses",{params:s})).data}catch(t){var e,a;throw console.error("Get courses error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load courses"}}},m=async s=>{try{return(await i.get("/courses/".concat(s))).data}catch(t){var e,a;throw console.error("Get course error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load course"}}},u=async s=>{try{return(await i.post("/courses/".concat(s,"/enroll"))).data}catch(t){var e,a;throw console.error("Enroll error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to enroll in course"}}},j=async(s,e)=>{try{return(await i.post("/courses/".concat(s,"/progress"),e)).data}catch(n){var a,t;throw console.error("Progress error:",(null===(a=n.response)||void 0===a?void 0:a.data)||n.message),(null===(t=n.response)||void 0===t?void 0:t.data)||{success:!1,message:"Failed to update progress"}}},x=async s=>{try{const e=localStorage.getItem("token"),a=await fetch("".concat(r,"/courses/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s}),t=await a.json();if(!a.ok)throw t;return t}catch(e){throw console.error("Submit course error:",e),e}},v=async s=>{try{const e=localStorage.getItem("token"),a=await fetch("".concat(r,"/notes/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s}),t=await a.json();if(!a.ok)throw t;return t}catch(e){throw console.error("Error submitting notes:",e),e}},p=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await i.get("/notes",{params:s})).data}catch(t){var e,a;throw console.error("Get notes error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load notes"}}},N=async s=>{try{return(await i.get("/notes/".concat(s))).data}catch(t){var e,a;throw console.error("Get note error:",(null===(e=t.response)||void 0===e?void 0:e.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load note"}}},g=async()=>{try{return(await i.get("/admin/pending")).data}catch(a){var s,e;throw console.error("Pending content error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load pending content"}}},f=async function(s,e,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{return(await i.post("/admin/content/".concat(s,"/").concat(e,"/approve"),{action:a,reason:t})).data}catch(l){var n,r;throw console.error("Approve content error:",(null===(n=l.response)||void 0===n?void 0:n.data)||l.message),(null===(r=l.response)||void 0===r?void 0:r.data)||{success:!1,message:"Failed to process content"}}},b=async()=>{try{return(await i.get("/admin/stats")).data}catch(a){var s,e;throw console.error("Admin stats error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load stats"}}},y=async()=>{try{return(await i.get("/admin/users")).data}catch(a){var s,e;throw console.error("Get users error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load users"}}}}}]);
//# sourceMappingURL=115.aa310600.chunk.js.map