"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[115],{115(e,s,a){a.r(s),a.d(s,{default:()=>l});var t=a(43),n=a(368),c=a(768),i=a(302),r=a(579);const l=function(){var e;const s=(0,n.Zp)(),[a,l]=(0,t.useState)(null),[o,d]=(0,t.useState)("pending"),[h,m]=(0,t.useState)([]),[u,j]=(0,t.useState)([]),[x,v]=(0,t.useState)([]),[p,N]=(0,t.useState)([]),[g,f]=(0,t.useState)([]),[b,w]=(0,t.useState)(null),[y,k]=(0,t.useState)(!0),[C,S]=(0,t.useState)(null),[A,E]=(0,t.useState)(!1),[F,U]=(0,t.useState)(!1),[D,P]=(0,t.useState)(!1),[I,T]=(0,t.useState)(!1),[L,O]=(0,t.useState)(null),[_,J]=(0,t.useState)(null),[R,z]=(0,t.useState)(""),[B,W]=(0,t.useState)(""),[G,M]=(0,t.useState)(!1),[q,V]=(0,t.useState)(null),[Y,Z]=(0,t.useState)(!0);(0,t.useEffect)(()=>{const e=localStorage.getItem("user"),a=localStorage.getItem("token");if(!e||!a)return alert("Please login to access admin dashboard"),void s("/login");const t=JSON.parse(e);if(l(t),"admin"!==t.role)return alert("Access denied. Admin privileges required."),void s("/");H()},[]);const H=async()=>{try{k(!0),S(null);const[e,s,a,t,n]=await Promise.all([(0,c.Fj)(),(0,c.NJ)({page:1,limit:100}),(0,c.CS)({page:1,limit:100}),(0,c.dE)(),(0,c.lo)()]);e.success&&(m(e.courses||[]),j(e.notes||[])),s.success&&v(s.courses||[]),a.success&&N(a.notes||[]),t.success&&w(t.stats),n.success&&f(n.users||[])}catch(e){console.error("Error fetching admin data:",e),S(e.message||"Failed to load admin data. Please try again.")}finally{k(!1)}},K=async function(e,s,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{E(!0);const n=await(0,c.nI)(s,e,a,t);if(!n.success)throw new Error(n.message||"Action failed");alert("Content ".concat(a,"d successfully!")),H()}catch(n){console.error("".concat(a," content error:"),n),alert(n.message||"Failed to ".concat(a," content"))}finally{E(!1)}},Q=(e,s)=>{O(e),J(s),z(""),W(""),T(!0)},X=()=>{T(!1),O(null),J(null),z(""),W("")},$=()=>{M(!1),V(null)},ee=()=>{s("/add-content/course")},se=()=>{s("/add-content/notes")},ae=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",te=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"published":return"published";case"pending":default:return"pending";case"rejected":return"rejected";case"draft":return"draft"}};return y?(0,r.jsxs)("div",{className:"admin-loading",children:[(0,r.jsx)("div",{className:"spinner"}),(0,r.jsx)("p",{children:"Loading admin dashboard..."})]}):C?(0,r.jsxs)("div",{className:"admin-error",children:[(0,r.jsx)("h2",{children:"Admin Dashboard Error"}),(0,r.jsx)("p",{children:C}),(0,r.jsx)("button",{onClick:H,className:"retry-btn",children:"Retry"})]}):(0,r.jsxs)("div",{className:"admin-wrapper",children:[I&&L&&(0,r.jsx)("div",{className:"modal-overlay",onClick:X,children:(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsxs)("h3",{children:["Delete ","course"===_?"Course":"Notes"]}),(0,r.jsx)("button",{className:"modal-close",onClick:X,children:(0,r.jsx)("i",{className:"fas fa-times"})})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("div",{className:"warning-box",children:[(0,r.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,r.jsx)("p",{children:"You are about to permanently delete:"})]}),(0,r.jsxs)("div",{className:"item-preview-box",children:[(0,r.jsx)("strong",{children:L.title}),L.authorName||L.instructorName&&(0,r.jsxs)("span",{children:[" by ",L.authorName||L.instructorName]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"deleteReason",children:"Reason for deletion (optional):"}),(0,r.jsx)("textarea",{id:"deleteReason",value:R,onChange:e=>z(e.target.value),placeholder:"Provide reason for deletion (will be logged)",rows:"3",disabled:F})]}),(0,r.jsxs)("div",{className:"confirm-section",children:[(0,r.jsxs)("p",{children:["Type ",(0,r.jsx)("strong",{children:"DELETE"})," to confirm:"]}),(0,r.jsx)("input",{type:"text",value:B,onChange:e=>W(e.target.value),placeholder:"DELETE",disabled:F,className:"confirm-input"})]}),(0,r.jsxs)("div",{className:"warning-text",children:[(0,r.jsx)("i",{className:"fas fa-exclamation-circle"}),"This action cannot be undone. The content will be permanently removed."]})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:X,disabled:F,children:"Cancel"}),(0,r.jsx)("button",{className:"btn btn-danger",onClick:async()=>{if(L&&_)if("DELETE"===B)try{U(!0);const e=await(0,c.vE)(_,L._id,R||"Content removed by admin");if(!e.success)throw new Error(e.message||"Delete failed");alert("".concat("course"===_?"Course":"Notes"," deleted successfully!")),X(),H()}catch(e){console.error("Delete error:",e),alert(e.message||"Failed to delete ".concat(_))}finally{U(!1)}else alert('Please type "DELETE" to confirm')},disabled:F||"DELETE"!==B,children:F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"fas fa-spinner fa-spin"}),"Deleting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"fas fa-trash"}),"Permanently Delete"]})})]})]})}),G&&q&&(0,r.jsx)("div",{className:"modal-overlay",onClick:$,children:(0,r.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsxs)("h3",{children:[Y?"Activate":"Deactivate"," User"]}),(0,r.jsx)("button",{className:"modal-close",onClick:$,children:(0,r.jsx)("i",{className:"fas fa-times"})})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("div",{className:"status-warning-box ".concat(Y?"activate":"deactivate"),children:[(0,r.jsx)("i",{className:"fas ".concat(Y?"fa-check-circle":"fa-ban")}),(0,r.jsxs)("p",{children:["Are you sure you want to ",Y?"activate":"deactivate"," this user?"]})]}),(0,r.jsxs)("div",{className:"user-info-box",children:[(0,r.jsx)("div",{className:"user-avatar-large",children:q.avatar?(0,r.jsx)("img",{src:q.avatar.startsWith("http")?q.avatar:"http://localhost:5000".concat(q.avatar),alt:q.fullName,onError:e=>{e.target.onerror=null,e.target.src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop"}}):(0,r.jsx)("div",{className:"user-avatar-placeholder",children:(null===(e=q.fullName)||void 0===e?void 0:e.charAt(0))||"?"})}),(0,r.jsxs)("div",{className:"user-details",children:[(0,r.jsx)("h4",{children:q.fullName}),(0,r.jsx)("p",{className:"user-email",children:q.email}),(0,r.jsxs)("p",{className:"user-role",children:["Role: ",(0,r.jsx)("span",{className:"role-badge ".concat(q.role),children:q.role})]}),(0,r.jsxs)("p",{className:"current-status",children:["Current Status:",(0,r.jsx)("span",{className:"status-badge ".concat(q.isActive?"active":"inactive"),children:q.isActive?"Active":"Inactive"})]})]})]}),!Y&&(0,r.jsxs)("div",{className:"warning-box deactivate-warning",children:[(0,r.jsx)("i",{className:"fas fa-info-circle"}),(0,r.jsx)("p",{children:"Deactivating this user will prevent them from logging in and accessing their account. All their data will be preserved but inaccessible until reactivated."})]})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:$,disabled:D,children:"Cancel"}),(0,r.jsx)("button",{className:"btn ".concat(Y?"btn-success":"btn-warning"),onClick:async()=>{if(q)try{P(!0);const e=await(0,c.pU)(q._id,Y);if(!e.success)throw new Error(e.message||"Status update failed");alert("User ".concat(Y?"activated":"deactivated"," successfully!")),$(),H()}catch(e){console.error("User status update error:",e),alert(e.message||"Failed to update user status")}finally{P(!1)}},disabled:D,children:D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"fas fa-spinner fa-spin"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"fas ".concat(Y?"fa-check":"fa-ban")}),Y?"Activate User":"Deactivate User"]})})]})]})}),(0,r.jsxs)("div",{className:"admin-container",children:[(0,r.jsxs)("aside",{className:"admin-sidebar",children:[(0,r.jsxs)("div",{className:"sidebar-header",children:[(0,r.jsx)("h2",{className:"dashboard-title",children:"Admin Dashboard"}),(0,r.jsxs)("div",{className:"admin-user-info",children:[(0,r.jsx)("div",{className:"user-icon",children:(0,r.jsx)("i",{className:"fas fa-user-shield"})}),(0,r.jsx)("span",{className:"user-name",children:null===a||void 0===a?void 0:a.fullName})]})]}),(0,r.jsxs)("div",{className:"sidebar-stats",children:[(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("div",{className:"stat-icon courses-icon",children:(0,r.jsx)("i",{className:"fas fa-chalkboard-teacher"})}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("span",{className:"stat-value",children:(null===b||void 0===b?void 0:b.publishedCourses)||0}),(0,r.jsx)("span",{className:"stat-label",children:"Published Courses"})]})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("div",{className:"stat-icon notes-icon",children:(0,r.jsx)("i",{className:"fas fa-file-alt"})}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("span",{className:"stat-value",children:(null===b||void 0===b?void 0:b.publishedNotes)||0}),(0,r.jsx)("span",{className:"stat-label",children:"Published Notes"})]})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("div",{className:"stat-icon pending-icon",children:(0,r.jsx)("i",{className:"fas fa-clock"})}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("span",{className:"stat-value",children:((null===b||void 0===b?void 0:b.pendingCourses)||0)+((null===b||void 0===b?void 0:b.pendingNotes)||0)}),(0,r.jsx)("span",{className:"stat-label",children:"Pending Approval"})]})]}),(0,r.jsxs)("div",{className:"stat-item",children:[(0,r.jsx)("div",{className:"stat-icon users-icon",children:(0,r.jsx)("i",{className:"fas fa-users"})}),(0,r.jsxs)("div",{className:"stat-info",children:[(0,r.jsx)("span",{className:"stat-value",children:(null===b||void 0===b?void 0:b.totalUsers)||0}),(0,r.jsx)("span",{className:"stat-label",children:"Total Users"})]})]})]}),(0,r.jsxs)("nav",{className:"sidebar-nav",children:[(0,r.jsxs)("button",{className:"nav-item ".concat("pending"===o?"active":""),onClick:()=>d("pending"),children:[(0,r.jsx)("i",{className:"fas fa-clock"}),(0,r.jsx)("span",{children:"Pending Approval"}),(0,r.jsx)("span",{className:"badge",children:h.length+u.length})]}),(0,r.jsxs)("button",{className:"nav-item ".concat("courses"===o?"active":""),onClick:()=>d("courses"),children:[(0,r.jsx)("i",{className:"fas fa-chalkboard-teacher"}),(0,r.jsx)("span",{children:"Manage Courses"})]}),(0,r.jsxs)("button",{className:"nav-item ".concat("notes"===o?"active":""),onClick:()=>d("notes"),children:[(0,r.jsx)("i",{className:"fas fa-file-alt"}),(0,r.jsx)("span",{children:"Manage Notes"})]}),(0,r.jsxs)("button",{className:"nav-item ".concat("users"===o?"active":""),onClick:()=>d("users"),children:[(0,r.jsx)("i",{className:"fas fa-users"}),(0,r.jsx)("span",{children:"Manage Users"})]}),(0,r.jsxs)("button",{className:"nav-item ".concat("add"===o?"active":""),onClick:()=>d("add"),children:[(0,r.jsx)("i",{className:"fas fa-plus-circle"}),(0,r.jsx)("span",{children:"Add Content"})]}),(0,r.jsx)("div",{className:"nav-divider"}),(0,r.jsxs)("button",{className:"nav-item logout-btn",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s("/login")},children:[(0,r.jsx)("i",{className:"fas fa-sign-out-alt"}),(0,r.jsx)("span",{children:"Logout"})]})]})]}),(0,r.jsxs)("main",{className:"admin-main",children:[(0,r.jsx)(i.A,{}),"pending"===o&&(0,r.jsxs)("div",{className:"content-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{className:"section-title",children:[(0,r.jsx)("i",{className:"fas fa-clock"}),"Content Awaiting Approval"]}),(0,r.jsxs)("button",{className:"btn btn-primary",onClick:H,children:[(0,r.jsx)("i",{className:"fas fa-sync-alt"}),"Refresh"]})]}),(0,r.jsxs)("div",{className:"pending-content",children:[(0,r.jsxs)("div",{className:"pending-category",children:[(0,r.jsxs)("h3",{className:"category-title",children:[(0,r.jsx)("i",{className:"fas fa-chalkboard-teacher"}),"Courses (",h.length,")"]}),h.length>0?(0,r.jsx)("div",{className:"pending-grid",children:h.map(e=>{var s;return(0,r.jsxs)("div",{className:"pending-card",children:[(0,r.jsxs)("div",{className:"pending-card-header",children:[(0,r.jsx)("h4",{children:e.title}),(0,r.jsx)("span",{className:"pending-badge",children:"Pending"})]}),(0,r.jsxs)("div",{className:"pending-card-body",children:[(0,r.jsxs)("p",{className:"author-info",children:["By ",e.instructorName||"Unknown Instructor"]}),(0,r.jsxs)("p",{className:"date-info",children:["Submitted: ",ae(e.createdAt)]}),(0,r.jsxs)("p",{className:"description",children:[null===(s=e.description)||void 0===s?void 0:s.substring(0,120),"..."]})]}),e.thumbnail&&(0,r.jsx)("div",{className:"pending-thumbnail",children:(0,r.jsx)("img",{src:e.thumbnail.startsWith("http")?e.thumbnail:"http://localhost:5000".concat(e.thumbnail),alt:e.title,onError:e=>{e.target.onerror=null,e.target.src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=300&auto=format&fit=crop"}})}),(0,r.jsxs)("div",{className:"pending-actions",children:[(0,r.jsxs)("button",{className:"btn btn-approve",onClick:()=>K(e._id,"course","approve"),disabled:A,children:[(0,r.jsx)("i",{className:"fas fa-check"}),"Approve"]}),(0,r.jsxs)("button",{className:"btn btn-reject",onClick:()=>{const s=prompt("Please provide rejection reason:");s&&K(e._id,"course","reject",s)},disabled:A,children:[(0,r.jsx)("i",{className:"fas fa-times"}),"Reject"]})]})]},e._id)})}):(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("i",{className:"fas fa-check-circle"}),(0,r.jsx)("p",{children:"No pending courses to review"})]})]}),(0,r.jsxs)("div",{className:"pending-category",children:[(0,r.jsxs)("h3",{className:"category-title",children:[(0,r.jsx)("i",{className:"fas fa-file-alt"}),"Notes (",u.length,")"]}),u.length>0?(0,r.jsx)("div",{className:"pending-grid",children:u.map(e=>{var s;return(0,r.jsxs)("div",{className:"pending-card",children:[(0,r.jsxs)("div",{className:"pending-card-header",children:[(0,r.jsx)("h4",{children:e.title}),(0,r.jsx)("span",{className:"pending-badge",children:"Pending"})]}),(0,r.jsxs)("div",{className:"pending-card-body",children:[(0,r.jsxs)("p",{className:"author-info",children:["By ",e.authorName||"Unknown Author"]}),(0,r.jsxs)("p",{className:"date-info",children:["Submitted: ",ae(e.createdAt)]}),(0,r.jsxs)("p",{className:"description",children:[null===(s=e.description)||void 0===s?void 0:s.substring(0,120),"..."]})]}),e.thumbnail&&(0,r.jsx)("div",{className:"pending-thumbnail",children:(0,r.jsx)("img",{src:e.thumbnail.startsWith("http")?e.thumbnail:"http://localhost:5000".concat(e.thumbnail),alt:e.title,onError:e=>{e.target.onerror=null,e.target.src="https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=300&auto=format&fit=crop"}})}),(0,r.jsxs)("div",{className:"pending-actions",children:[(0,r.jsxs)("button",{className:"btn btn-approve",onClick:()=>K(e._id,"notes","approve"),disabled:A,children:[(0,r.jsx)("i",{className:"fas fa-check"}),"Approve"]}),(0,r.jsxs)("button",{className:"btn btn-reject",onClick:()=>{const s=prompt("Please provide rejection reason:");s&&K(e._id,"notes","reject",s)},disabled:A,children:[(0,r.jsx)("i",{className:"fas fa-times"}),"Reject"]})]})]},e._id)})}):(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("i",{className:"fas fa-check-circle"}),(0,r.jsx)("p",{children:"No pending notes to review"})]})]})]})]}),"courses"===o&&(0,r.jsxs)("div",{className:"content-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{className:"section-title",children:[(0,r.jsx)("i",{className:"fas fa-chalkboard-teacher"}),"Manage Courses"]}),(0,r.jsxs)("button",{className:"btn btn-primary",onClick:ee,children:[(0,r.jsx)("i",{className:"fas fa-plus"}),"Add New Course"]})]}),(0,r.jsx)("div",{className:"table-container",children:(0,r.jsxs)("table",{className:"data-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Author"}),(0,r.jsx)("th",{children:"Category"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Students"}),(0,r.jsx)("th",{children:"Created"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:x.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"table-title-cell",children:[e.thumbnail&&(0,r.jsx)("img",{src:e.thumbnail.startsWith("http")?e.thumbnail:"http://localhost:5000".concat(e.thumbnail),alt:e.title,className:"table-thumbnail",onError:e=>{e.target.onerror=null,e.target.src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=50&auto=format&fit=crop"}}),(0,r.jsx)("span",{className:"title-text",children:e.title})]}),(0,r.jsx)("td",{children:e.instructorName||"N/A"}),(0,r.jsx)("td",{children:e.category}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"status-badge ".concat(te(e.status)),children:e.status})}),(0,r.jsx)("td",{children:(e.studentsEnrolled||0).toLocaleString()}),(0,r.jsx)("td",{children:ae(e.createdAt)}),(0,r.jsxs)("td",{className:"action-cell",children:[(0,r.jsx)("button",{className:"action-btn view-btn",onClick:()=>s("/course/".concat(e._id)),title:"View Course",children:(0,r.jsx)("i",{className:"fas fa-eye"})}),(0,r.jsx)("button",{className:"action-btn edit-btn",onClick:()=>alert("Edit functionality coming soon"),title:"Edit Course",children:(0,r.jsx)("i",{className:"fas fa-edit"})}),(0,r.jsx)("button",{className:"action-btn delete-btn",onClick:()=>Q(e,"course"),title:"Delete Course",children:(0,r.jsx)("i",{className:"fas fa-trash"})})]})]},e._id))})]})})]}),"notes"===o&&(0,r.jsxs)("div",{className:"content-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{className:"section-title",children:[(0,r.jsx)("i",{className:"fas fa-file-alt"}),"Manage Notes"]}),(0,r.jsxs)("button",{className:"btn btn-primary",onClick:se,children:[(0,r.jsx)("i",{className:"fas fa-plus"}),"Add New Notes"]})]}),(0,r.jsx)("div",{className:"table-container",children:(0,r.jsxs)("table",{className:"data-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Author"}),(0,r.jsx)("th",{children:"Category"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Downloads"}),(0,r.jsx)("th",{children:"Created"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:p.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"table-title-cell",children:[e.thumbnail&&(0,r.jsx)("img",{src:e.thumbnail.startsWith("http")?e.thumbnail:"http://localhost:5000".concat(e.thumbnail),alt:e.title,className:"table-thumbnail",onError:e=>{e.target.onerror=null,e.target.src="https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=50&auto=format&fit=crop"}}),(0,r.jsx)("span",{className:"title-text",children:e.title})]}),(0,r.jsx)("td",{children:e.authorName||"N/A"}),(0,r.jsx)("td",{children:e.category}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"status-badge ".concat(te(e.status)),children:e.status})}),(0,r.jsx)("td",{children:(e.downloads||0).toLocaleString()}),(0,r.jsx)("td",{children:ae(e.createdAt)}),(0,r.jsxs)("td",{className:"action-cell",children:[(0,r.jsx)("button",{className:"action-btn view-btn",onClick:()=>s("/pdf/viewer/".concat(e._id)),title:"View Notes",children:(0,r.jsx)("i",{className:"fas fa-eye"})}),(0,r.jsx)("button",{className:"action-btn edit-btn",onClick:()=>alert("Edit functionality coming soon"),title:"Edit Notes",children:(0,r.jsx)("i",{className:"fas fa-edit"})}),(0,r.jsx)("button",{className:"action-btn delete-btn",onClick:()=>Q(e,"notes"),title:"Delete Notes",children:(0,r.jsx)("i",{className:"fas fa-trash"})}),(0,r.jsx)("button",{className:"action-btn download-btn",onClick:()=>{e.externalUrl?window.open(e.externalUrl,"_blank"):alert("No download link available")},title:"Download",children:(0,r.jsx)("i",{className:"fas fa-download"})})]})]},e._id))})]})})]}),"users"===o&&(0,r.jsxs)("div",{className:"content-section",children:[(0,r.jsxs)("div",{className:"section-header",children:[(0,r.jsxs)("h2",{className:"section-title",children:[(0,r.jsx)("i",{className:"fas fa-users"}),"User Management"]}),(0,r.jsxs)("div",{className:"user-stats",children:[(0,r.jsxs)("span",{children:["Total Users: ",g.length]}),(0,r.jsxs)("span",{children:["Active: ",g.filter(e=>e.isActive).length]}),(0,r.jsxs)("span",{children:["Admins: ",g.filter(e=>"admin"===e.role).length]})]})]}),(0,r.jsx)("div",{className:"table-container",children:(0,r.jsxs)("table",{className:"data-table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Email"}),(0,r.jsx)("th",{children:"Role"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Joined"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:g.map(e=>{var s;return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"user-info-cell",children:[e.avatar?(0,r.jsx)("img",{src:e.avatar.startsWith("http")?e.avatar:"http://localhost:5000".concat(e.avatar),alt:e.fullName,className:"user-avatar",onError:e=>{e.target.onerror=null,e.target.src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop"}}):(0,r.jsx)("div",{className:"user-avatar-placeholder small",children:(null===(s=e.fullName)||void 0===s?void 0:s.charAt(0))||"?"}),(0,r.jsx)("span",{children:e.fullName})]}),(0,r.jsx)("td",{children:e.email}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"role-badge ".concat(e.role),children:e.role})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{className:"status-badge ".concat(e.isActive?"active":"inactive"),children:e.isActive?"Active":"Inactive"})}),(0,r.jsx)("td",{children:ae(e.createdAt)}),(0,r.jsxs)("td",{className:"action-cell",children:[(0,r.jsx)("button",{className:"action-btn edit-btn",onClick:()=>alert("Edit user functionality coming soon"),title:"Edit User",children:(0,r.jsx)("i",{className:"fas fa-edit"})}),(0,r.jsx)("button",{className:"action-btn ".concat(e.isActive?"deactivate-btn":"activate-btn"),onClick:()=>(e=>{V(e),Z(!e.isActive),M(!0)})(e),title:e.isActive?"Deactivate User":"Activate User",children:(0,r.jsx)("i",{className:"fas ".concat(e.isActive?"fa-user-times":"fa-user-check")})})]})]},e._id)})})]})})]}),"add"===o&&(0,r.jsxs)("div",{className:"content-section",children:[(0,r.jsxs)("h2",{className:"section-title",children:[(0,r.jsx)("i",{className:"fas fa-plus-circle"}),"Add New Content"]}),(0,r.jsxs)("div",{className:"content-options-grid",children:[(0,r.jsxs)("div",{className:"option-card",onClick:ee,children:[(0,r.jsx)("div",{className:"option-icon",children:(0,r.jsx)("i",{className:"fas fa-chalkboard-teacher"})}),(0,r.jsx)("h3",{children:"Add Course"}),(0,r.jsx)("p",{children:"Create a new course with videos, quizzes, and assignments"}),(0,r.jsx)("button",{className:"btn btn-primary",children:"Create Course"})]}),(0,r.jsxs)("div",{className:"option-card",onClick:se,children:[(0,r.jsx)("div",{className:"option-icon",children:(0,r.jsx)("i",{className:"fas fa-file-alt"})}),(0,r.jsx)("h3",{children:"Add Notes"}),(0,r.jsx)("p",{children:"Upload PDF notes or create study materials"}),(0,r.jsx)("button",{className:"btn btn-primary",children:"Upload Notes"})]}),(0,r.jsxs)("div",{className:"option-card disabled",children:[(0,r.jsx)("div",{className:"option-icon",children:(0,r.jsx)("i",{className:"fas fa-question-circle"})}),(0,r.jsx)("h3",{children:"Add Quiz"}),(0,r.jsx)("p",{children:"Create assessments and quizzes for courses"}),(0,r.jsx)("button",{className:"btn btn-primary",disabled:!0,children:"Coming Soon"})]})]})]})]})]})]})}},302(e,s,a){a.d(s,{A:()=>i});var t=a(43),n=a(368),c=a(579);const i=function(e){var s;let{showProfile:a=!0}=e;const i=(0,n.Zp)(),[r,l]=(0,t.useState)(null),[o,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=localStorage.getItem("user");e&&l(JSON.parse(e))},[]);const h=e=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U";return(0,c.jsxs)("header",{className:"navbar",children:[(0,c.jsx)("div",{className:"nav-left",children:(0,c.jsx)("div",{className:"logo",onClick:()=>i("/"),children:(0,c.jsx)("img",{src:"/img/logo.png",alt:"E Siksha Logo"})})}),(0,c.jsx)("div",{className:"nav-right",children:a?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("nav",{className:"nav-links",children:[(0,c.jsx)("button",{className:"nav-link",onClick:()=>i("/"),children:"Home"}),(0,c.jsx)("button",{className:"nav-link",onClick:()=>i("/list"),children:"Courses"}),(0,c.jsx)("button",{className:"nav-link",onClick:()=>i("/pdf"),children:"Notes"}),(0,c.jsx)("button",{className:"nav-link",onClick:()=>i("/about"),children:"About"})]}),r?(0,c.jsxs)("div",{className:"user-profile",onClick:()=>d(!o),children:[r.avatar?(0,c.jsx)("img",{src:r.avatar,alt:r.fullName,className:"user-avatar"}):(0,c.jsx)("div",{className:"avatar-placeholder",children:h(r.fullName)}),(0,c.jsx)("span",{className:"user-name",children:(null===(s=r.fullName)||void 0===s?void 0:s.split(" ")[0])||"User"}),(0,c.jsx)("i",{className:"fas fa-chevron-".concat(o?"up":"down")}),o&&(0,c.jsxs)("div",{className:"dropdown-menu",children:[(0,c.jsx)("div",{className:"dropdown-header",children:(0,c.jsxs)("div",{className:"user-info",children:[r.avatar?(0,c.jsx)("img",{src:r.avatar,alt:r.fullName}):(0,c.jsx)("div",{className:"avatar-small",children:h(r.fullName)}),(0,c.jsxs)("div",{children:[(0,c.jsx)("strong",{children:r.fullName}),(0,c.jsx)("span",{children:r.email})]})]})}),(0,c.jsx)("div",{className:"dropdown-divider"}),(0,c.jsxs)("button",{className:"dropdown-item",onClick:()=>{(()=>{const e=localStorage.getItem("user");e?"admin"===JSON.parse(e).role?i("/admin"):i("/dashboard"):i("/login")})(),d(!1)},children:[(0,c.jsx)("i",{className:"fas fa-tachometer-alt"}),"Dashboard"]}),(0,c.jsxs)("button",{className:"dropdown-item",onClick:()=>{i("/add-content"),d(!1)},children:[(0,c.jsx)("i",{className:"fas fa-plus-circle"}),"Add Content"]}),(0,c.jsxs)("button",{className:"dropdown-item",onClick:()=>{i("/profile"),d(!1)},children:[(0,c.jsx)("i",{className:"fas fa-user-cog"}),"Edit Profile"]}),(0,c.jsx)("div",{className:"dropdown-divider"}),(0,c.jsxs)("button",{className:"dropdown-item logout",onClick:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),l(null),d(!1),i("/login")},children:[(0,c.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]})]}):(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("button",{className:"btn btn-primary",onClick:()=>i("/reg"),children:[(0,c.jsx)("i",{className:"fas fa-user-plus"}),"Sign Up"]})})]}):(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>i("/login"),children:"Get Started"})})]})}},768(e,s,a){a.d(s,{CS:()=>p,DA:()=>u,DY:()=>r,E0:()=>m,Fj:()=>g,K3:()=>j,Lx:()=>l,NJ:()=>h,cs:()=>v,dE:()=>b,lo:()=>w,mc:()=>x,nI:()=>f,pU:()=>k,r7:()=>o,tO:()=>d,vE:()=>y,vW:()=>N});var t=a(555),n=a(722);const c="https://e-siksha-mljg.onrender.com/api",i=n.A.create({baseURL:c,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const r=async e=>{try{const s=await i.post("/register",e);return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data}catch(t){var s,a;throw console.error("Registration error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Registration failed"}}},l=async e=>{try{const s=await i.post("/login",e);return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data}catch(t){var s,a;throw console.error("Login error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Login failed"}}},o=async e=>{try{const s=new FormData;Object.keys(e).forEach(a=>{"skills"===a&&Array.isArray(e[a])?s.append(a,JSON.stringify(e[a])):("avatar"===a&&(e[a],File),s.append(a,e[a]))});const a=localStorage.getItem("token"),n=await fetch("".concat(c,"/user/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:s}),i=await n.json();if(!n.ok)throw i;if(i.user){const e=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify((0,t.A)((0,t.A)({},e),i.user)))}return i}catch(a){var s;throw console.error("Update profile error:",a),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to update profile"}}},d=async()=>{try{return(await i.get("/user/dashboard")).data}catch(a){var e,s;throw console.error("Dashboard error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load dashboard"}}},h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await i.get("/courses",{params:e})).data}catch(t){var s,a;throw console.error("Get courses error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load courses"}}},m=async e=>{try{return(await i.get("/courses/".concat(e))).data}catch(t){var s,a;throw console.error("Get course error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load course"}}},u=async e=>{try{return(await i.post("/courses/".concat(e,"/enroll"))).data}catch(t){var s,a;throw console.error("Enroll error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to enroll in course"}}},j=async(e,s)=>{try{return(await i.post("/courses/".concat(e,"/progress"),s)).data}catch(n){var a,t;throw console.error("Progress error:",(null===(a=n.response)||void 0===a?void 0:a.data)||n.message),(null===(t=n.response)||void 0===t?void 0:t.data)||{success:!1,message:"Failed to update progress"}}},x=async e=>{try{const s=localStorage.getItem("token"),a=await fetch("".concat(c,"/courses/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(s)},body:e}),t=await a.json();if(!a.ok)throw t;return t}catch(s){throw console.error("Submit course error:",s),s}},v=async e=>{try{const s=localStorage.getItem("token"),a=await fetch("".concat(c,"/notes/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(s)},body:e}),t=await a.json();if(!a.ok)throw t;return t}catch(s){throw console.error("Error submitting notes:",s),s}},p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await i.get("/notes",{params:e})).data}catch(t){var s,a;throw console.error("Get notes error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load notes"}}},N=async e=>{try{return(await i.get("/notes/".concat(e))).data}catch(t){var s,a;throw console.error("Get note error:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),(null===(a=t.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load note"}}},g=async()=>{try{return(await i.get("/admin/pending")).data}catch(a){var e,s;throw console.error("Pending content error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load pending content"}}},f=async function(e,s,a){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{return(await i.post("/admin/content/".concat(e,"/").concat(s,"/approve"),{action:a,reason:t})).data}catch(r){var n,c;throw console.error("Approve content error:",(null===(n=r.response)||void 0===n?void 0:n.data)||r.message),(null===(c=r.response)||void 0===c?void 0:c.data)||{success:!1,message:"Failed to process content"}}},b=async()=>{try{return(await i.get("/admin/stats")).data}catch(a){var e,s;throw console.error("Admin stats error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load stats"}}},w=async()=>{try{return(await i.get("/admin/users")).data}catch(a){var e,s;throw console.error("Get users error:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),(null===(s=a.response)||void 0===s?void 0:s.data)||{success:!1,message:"Failed to load users"}}},y=async function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{const t=localStorage.getItem("token");if(!t)throw new Error("No authentication token found");const n=await fetch("".concat(c,"/admin/").concat(e,"/").concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({reason:a})}),i=await n.json();if(!n.ok)throw new Error(i.message||"Failed to delete ".concat(e));return i}catch(t){throw console.error("Error deleting ".concat(e,":"),t),t}},k=async(e,s)=>{try{const a=localStorage.getItem("token");if(!a)throw new Error("No authentication token found");const t=await fetch("".concat(c,"/admin/users/").concat(e,"/status"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({isActive:s})}),n=await t.json();if(!t.ok)throw new Error(n.message||"Failed to update user status");return n}catch(a){throw console.error("Error updating user status:",a),a}}}}]);
//# sourceMappingURL=115.3ea7b9e8.chunk.js.map