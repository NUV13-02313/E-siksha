"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[28],{28(s,e,a){a.r(e),a.d(e,{default:()=>c});var r=a(555),t=a(43),l=a(368),o=a(768),n=a(302),i=a(579);const c=function(){var s,e,a;const c=(0,l.Zp)(),[d,m]=(0,t.useState)(null),[u,h]=(0,t.useState)("overview"),[v,j]=(0,t.useState)(null),[x,N]=(0,t.useState)(!0),[p,f]=(0,t.useState)(null),[g,b]=(0,t.useState)(!1),[w,y]=(0,t.useState)({fullName:"",bio:"",avatar:null});(0,t.useEffect)(()=>{const s=localStorage.getItem("token"),e=localStorage.getItem("user");if(!s||!e)return console.warn("Missing auth credentials - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),void c("/login",{replace:!0});try{const s=JSON.parse(e);if(null===s||void 0===s||!s.id||null===s||void 0===s||!s.fullName)throw new Error("Invalid user data structure");m(s),y(e=>(0,r.A)((0,r.A)({},e),{},{fullName:s.fullName||"",bio:s.bio||""})),C()}catch(a){console.error("Auth validation failed:",a),localStorage.removeItem("token"),localStorage.removeItem("user"),alert("Session expired. Please login again."),c("/login",{replace:!0})}},[c]);const C=async()=>{try{N(!0),f(null);const s=await(0,o.tO)();if(!s.success)throw new Error(s.message||"Failed to load dashboard data");if(console.log("Dashboard data:",s.data),j(s.data),s.data.user){const e=s.data.user,a=(0,r.A)((0,r.A)({},e),{},{avatar:e.avatar||""});m(a),localStorage.setItem("user",JSON.stringify(a)),y({fullName:a.fullName||"",bio:a.bio||"",avatar:null})}}catch(s){console.error("Dashboard fetch error:",s),f(s.message||"Failed to load dashboard. Please try again.")}finally{N(!1)}};if(x)return(0,i.jsx)("div",{className:"dashboard-loading-container",children:(0,i.jsxs)("div",{className:"dashboard-loading-card",children:[(0,i.jsxs)("div",{className:"loading-spinner",children:[(0,i.jsx)("div",{className:"spinner-ring"}),(0,i.jsx)("div",{className:"spinner-ring"}),(0,i.jsx)("div",{className:"spinner-ring"}),(0,i.jsx)("div",{className:"spinner-ring"})]}),(0,i.jsx)("h2",{children:"Loading Your Dashboard"}),(0,i.jsx)("p",{children:"Fetching your learning progress and course data..."}),(0,i.jsxs)("div",{className:"loading-progress",children:[(0,i.jsx)("div",{className:"progress-bar",children:(0,i.jsx)("div",{className:"progress-fill",style:{width:"35%"}})}),(0,i.jsx)("span",{className:"progress-text",children:"35%"})]}),(0,i.jsx)("div",{className:"loading-tips",children:(0,i.jsxs)("p",{children:[(0,i.jsx)("i",{className:"fas fa-lightbulb"})," Tip: Complete your profile to get personalized course recommendations!"]})})]})});if(p)return(0,i.jsxs)("div",{className:"dashboard-error",children:[(0,i.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,i.jsx)("h3",{children:"Dashboard Error"}),(0,i.jsx)("p",{children:p}),(0,i.jsxs)("button",{onClick:C,className:"retry-btn",children:[(0,i.jsx)("i",{className:"fas fa-redo"})," Retry"]})]});if(!d)return console.warn("User state is null - redirecting"),c("/login",{replace:!0}),null;const k=(null===v||void 0===v?void 0:v.stats)||{},S=null!==v&&void 0!==v&&v.recentCourses?v.recentCourses.slice(0,3):[],A=null!==v&&void 0!==v&&v.recentCourses?v.recentCourses:[],I=null!==v&&void 0!==v&&v.stats?Math.round(v.stats.averageProgress||0):0;return(0,i.jsxs)("div",{className:"dashboard-wrapper",children:[(0,i.jsx)(n.A,{}),(0,i.jsxs)("div",{className:"dashboard-container",children:[(0,i.jsxs)("header",{className:"dashboard-header",children:[(0,i.jsx)("h1",{children:"My Learning Dashboard"}),(0,i.jsxs)("p",{children:["Welcome back, ",null===d||void 0===d||null===(s=d.fullName)||void 0===s?void 0:s.split(" ")[0],"! Continue your learning journey"]})]}),(0,i.jsxs)("div",{className:"dashboard-content",children:[(0,i.jsxs)("div",{className:"dashboard-sidebar",children:[(0,i.jsx)("div",{className:"profile-card",children:(0,i.jsxs)("div",{className:"profile-header",children:[(0,i.jsx)("div",{className:"profile-avatar-container",children:null!==d&&void 0!==d&&d.avatar?(0,i.jsx)("img",{src:d.avatar.startsWith("http")?d.avatar:"http://localhost:5000".concat(d.avatar),alt:d.fullName||"User",className:"profile-avatar",onError:s=>{s.target.onerror=null,s.target.src="https://ui-avatars.com/api/?name=".concat(encodeURIComponent(d.fullName||"U"),"&background=6366f1&color=fff")}}):(0,i.jsx)("div",{className:"profile-avatar-placeholder",children:(0,i.jsx)("span",{children:(null===d||void 0===d||null===(e=d.fullName)||void 0===e?void 0:e.charAt(0))||"U"})})}),(0,i.jsx)("h3",{children:(null===d||void 0===d?void 0:d.fullName)||"User"}),(0,i.jsx)("p",{className:"user-email",children:(null===d||void 0===d?void 0:d.email)||"email@example.com"}),(0,i.jsxs)("div",{className:"profile-stats",children:[(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("span",{className:"stat-number",children:k.totalEnrollments||0}),(0,i.jsx)("span",{className:"stat-label",children:"Courses"})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsxs)("span",{className:"stat-number",children:[I,"%"]}),(0,i.jsx)("span",{className:"stat-label",children:"Progress"})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("span",{className:"stat-number",children:k.completedCourses||0}),(0,i.jsx)("span",{className:"stat-label",children:"Completed"})]})]})]})}),(0,i.jsxs)("nav",{className:"dashboard-nav",children:[(0,i.jsxs)("button",{className:"nav-item ".concat("overview"===u?"active":""),onClick:()=>h("overview"),children:[(0,i.jsx)("i",{className:"fas fa-home"})," Overview"]}),(0,i.jsxs)("button",{className:"nav-item ".concat("courses"===u?"active":""),onClick:()=>h("courses"),children:[(0,i.jsx)("i",{className:"fas fa-book-open"})," My Courses"]}),(0,i.jsxs)("button",{className:"nav-item ".concat("notes"===u?"active":""),onClick:()=>h("notes"),children:[(0,i.jsx)("i",{className:"fas fa-file-alt"})," My Notes"]}),(0,i.jsxs)("button",{className:"nav-item ".concat("profile"===u?"active":""),onClick:()=>{h("profile"),b(!1)},children:[(0,i.jsx)("i",{className:"fas fa-user"})," Profile"]}),(0,i.jsxs)("button",{className:"nav-item ".concat("contributions"===u?"active":""),onClick:()=>h("contributions"),children:[(0,i.jsx)("i",{className:"fas fa-lightbulb"})," My Contributions"]}),(0,i.jsxs)("button",{className:"nav-item logout-btn",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),c("/login")},children:[(0,i.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})]})]}),(0,i.jsxs)("div",{className:"dashboard-main",children:["overview"===u&&(0,i.jsxs)("div",{className:"overview-tab",children:[(0,i.jsxs)("div",{className:"welcome-section",children:[(0,i.jsx)("h2",{children:"Continue Your Learning Journey"}),(0,i.jsx)("p",{children:"You're making great progress! Keep going to achieve your goals."})]}),(0,i.jsxs)("div",{className:"progress-section",children:[(0,i.jsx)("h3",{children:"Overall Progress"}),(0,i.jsxs)("div",{className:"progress-card",children:[(0,i.jsxs)("div",{className:"progress-header",children:[(0,i.jsx)("span",{children:"Current Progress"}),(0,i.jsxs)("span",{className:"progress-percentage",children:[I,"%"]})]}),(0,i.jsx)("div",{className:"progress-bar",children:(0,i.jsx)("div",{className:"progress-fill",style:{width:"".concat(I,"%")}})}),(0,i.jsxs)("div",{className:"progress-stats",children:[(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("i",{className:"fas fa-graduation-cap"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"stat-value",children:k.completedCourses||0}),(0,i.jsx)("span",{className:"stat-label",children:"Completed Courses"})]})]}),(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("i",{className:"fas fa-trophy"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"stat-value",children:k.totalEnrollments||0}),(0,i.jsx)("span",{className:"stat-label",children:"Total Enrollments"})]})]}),(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("i",{className:"fas fa-medal"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"stat-value",children:k.submittedCourses||0}),(0,i.jsx)("span",{className:"stat-label",children:"Contributions"})]})]})]})]})]}),(0,i.jsxs)("div",{className:"recent-courses",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("h3",{children:"Continue Learning"}),(0,i.jsxs)("button",{className:"view-all-btn",onClick:()=>h("courses"),children:["View All ",(0,i.jsx)("i",{className:"fas fa-arrow-right"})]})]}),(0,i.jsx)("div",{className:"course-grid",children:S.length>0?S.map(s=>{var e,a;const r=s.course,t=s.progress||0;return(0,i.jsxs)("div",{className:"course-card",onClick:()=>c("/course/".concat(r._id)),children:[(0,i.jsxs)("div",{className:"course-image",children:[(0,i.jsx)("img",{src:null!==(e=r.thumbnail)&&void 0!==e&&e.startsWith("http")?r.thumbnail:"http://localhost:5000".concat(r.thumbnail),alt:r.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=300&h=169&fit=crop"}}),(0,i.jsx)("div",{className:"course-progress",children:(0,i.jsx)("div",{className:"progress-circle",style:{background:"conic-gradient(#6366f1 ".concat(3.6*t,"deg, #e2e8f0 ").concat(3.6*t,"deg 360deg)")},children:(0,i.jsxs)("span",{children:[t,"%"]})})})]}),(0,i.jsxs)("div",{className:"course-content",children:[(0,i.jsx)("span",{className:"course-category",children:r.category}),(0,i.jsx)("h4",{children:r.title}),(0,i.jsxs)("p",{className:"course-description",children:[null===(a=r.description)||void 0===a?void 0:a.substring(0,80),"..."]}),(0,i.jsxs)("div",{className:"course-footer",children:[(0,i.jsxs)("span",{className:"progress-text",children:[t,"% Complete"]}),(0,i.jsxs)("button",{className:"continue-btn",children:["Continue ",(0,i.jsx)("i",{className:"fas fa-arrow-right"})]})]})]})]},r._id)}):(0,i.jsxs)("div",{className:"empty-state",children:[(0,i.jsx)("i",{className:"fas fa-book-open"}),(0,i.jsx)("h3",{children:"No active courses"}),(0,i.jsx)("p",{children:"Start learning by enrolling in your first course"}),(0,i.jsxs)("button",{className:"browse-courses-btn",onClick:()=>c("/list"),children:[(0,i.jsx)("i",{className:"fas fa-search"})," Browse Courses"]})]})})]}),(0,i.jsxs)("div",{className:"contributions-section",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("h3",{children:"Your Contributions"}),(0,i.jsxs)("button",{className:"view-all-btn",onClick:()=>h("contributions"),children:["View All ",(0,i.jsx)("i",{className:"fas fa-arrow-right"})]})]}),(0,i.jsxs)("div",{className:"contributions-grid",children:[(0,i.jsxs)("div",{className:"contribution-card",children:[(0,i.jsx)("i",{className:"fas fa-chalkboard-teacher"}),(0,i.jsx)("h4",{children:k.submittedCourses||0}),(0,i.jsx)("p",{children:"Courses Created"})]}),(0,i.jsxs)("div",{className:"contribution-card",children:[(0,i.jsx)("i",{className:"fas fa-file-alt"}),(0,i.jsx)("h4",{children:k.submittedNotes||0}),(0,i.jsx)("p",{children:"Notes Shared"})]}),(0,i.jsxs)("div",{className:"contribution-card",children:[(0,i.jsx)("i",{className:"fas fa-star"}),(0,i.jsx)("h4",{children:I}),(0,i.jsx)("p",{children:"Avg. Rating"})]})]})]})]}),"courses"===u&&(0,i.jsxs)("div",{className:"courses-tab",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsxs)("h2",{children:["My Courses (",A.length,")"]}),(0,i.jsxs)("button",{className:"browse-btn",onClick:()=>c("/list"),children:[(0,i.jsx)("i",{className:"fas fa-plus"})," Browse More Courses"]})]}),A.length>0?(0,i.jsx)("div",{className:"enrolled-courses",children:A.map(s=>{var e,a;const r=s.course,t=s.progress||0;return(0,i.jsxs)("div",{className:"enrolled-course-card",children:[(0,i.jsx)("div",{className:"course-thumbnail",children:(0,i.jsx)("img",{src:null!==(e=r.thumbnail)&&void 0!==e&&e.startsWith("http")?r.thumbnail:"http://localhost:5000".concat(r.thumbnail),alt:r.title,onError:s=>{s.target.onerror=null,s.target.src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=200&h=113&fit=crop"}})}),(0,i.jsxs)("div",{className:"course-details",children:[(0,i.jsxs)("div",{className:"course-header",children:[(0,i.jsx)("h3",{children:r.title}),(0,i.jsx)("span",{className:"course-status ".concat(100===t?"completed":"active"),children:100===t?"Completed":"In Progress"})]}),(0,i.jsxs)("p",{className:"course-description",children:[null===(a=r.description)||void 0===a?void 0:a.substring(0,100),"..."]}),(0,i.jsxs)("div",{className:"course-meta",children:[(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-user"})," ",r.instructorName||"Instructor"]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-clock"})," ",r.duration||"10 hours"]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-chart-line"})," ",r.level||"Beginner"]})]}),(0,i.jsxs)("div",{className:"course-progress-section",children:[(0,i.jsxs)("div",{className:"progress-label",children:[(0,i.jsx)("span",{children:"Progress"}),(0,i.jsxs)("span",{children:[t,"%"]})]}),(0,i.jsx)("div",{className:"course-progress-bar",children:(0,i.jsx)("div",{className:"progress",style:{width:"".concat(t,"%")}})})]}),(0,i.jsxs)("div",{className:"course-actions",children:[(0,i.jsx)("button",{className:"resume-btn",onClick:()=>c("/course/".concat(r._id)),children:100===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-certificate"})," View Certificate"]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("i",{className:"fas fa-play-circle"})," Resume Course"]})}),(0,i.jsxs)("button",{className:"view-details-btn",onClick:()=>c("/course/".concat(r._id)),children:[(0,i.jsx)("i",{className:"fas fa-info-circle"})," Details"]})]})]})]},r._id)})}):(0,i.jsxs)("div",{className:"empty-state",children:[(0,i.jsx)("i",{className:"fas fa-book"}),(0,i.jsx)("h3",{children:"No enrolled courses"}),(0,i.jsx)("p",{children:"Start your learning journey by enrolling in courses"}),(0,i.jsxs)("button",{className:"browse-courses-btn",onClick:()=>c("/list"),children:[(0,i.jsx)("i",{className:"fas fa-search"})," Browse Courses"]})]})]}),"notes"===u&&(0,i.jsxs)("div",{className:"notes-tab",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("h2",{children:"My Notes"}),(0,i.jsxs)("button",{className:"add-note-btn",onClick:()=>c("/add-content/notes"),children:[(0,i.jsx)("i",{className:"fas fa-plus"})," Add New Notes"]})]}),(0,i.jsx)("div",{className:"notes-grid",children:[1,2,3].map(s=>(0,i.jsxs)("div",{className:"note-card",children:[(0,i.jsx)("div",{className:"note-thumbnail",children:(0,i.jsx)("i",{className:"fas fa-file-pdf"})}),(0,i.jsxs)("div",{className:"note-content",children:[(0,i.jsx)("h4",{children:"JavaScript Complete Reference"}),(0,i.jsx)("p",{className:"note-description",children:"Comprehensive guide to JavaScript ES6+ with examples"}),(0,i.jsxs)("div",{className:"note-meta",children:[(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-folder"})," Web Development"]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-download"})," 150 downloads"]})]}),(0,i.jsxs)("div",{className:"note-actions",children:[(0,i.jsxs)("button",{className:"view-note-btn",children:[(0,i.jsx)("i",{className:"fas fa-eye"})," View"]}),(0,i.jsxs)("button",{className:"download-note-btn",children:[(0,i.jsx)("i",{className:"fas fa-download"})," Download"]})]})]})]},s))}),(0,i.jsxs)("div",{className:"empty-state",children:[(0,i.jsx)("i",{className:"fas fa-sticky-note"}),(0,i.jsx)("h3",{children:"No saved notes"}),(0,i.jsx)("p",{children:"Start adding notes to keep track of your learning"}),(0,i.jsxs)("button",{className:"add-note-btn",onClick:()=>c("/add-content/notes"),children:[(0,i.jsx)("i",{className:"fas fa-plus"})," Add Your First Note"]})]})]}),"profile"===u&&(0,i.jsxs)("div",{className:"profile-tab",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("h2",{children:"Profile Settings"}),g?(0,i.jsxs)("button",{className:"cancel-edit-btn",onClick:()=>{b(!1),y({fullName:(null===d||void 0===d?void 0:d.fullName)||"",bio:(null===d||void 0===d?void 0:d.bio)||"",avatar:null})},children:[(0,i.jsx)("i",{className:"fas fa-times"})," Cancel"]}):(0,i.jsxs)("button",{className:"edit-profile-btn",onClick:()=>b(!0),children:[(0,i.jsx)("i",{className:"fas fa-edit"})," Edit Profile"]})]}),(0,i.jsxs)("div",{className:"profile-container",children:[(0,i.jsxs)("div",{className:"profile-avatar-section",children:[(0,i.jsx)("div",{className:"avatar-preview",children:w.avatar?(0,i.jsx)("img",{src:URL.createObjectURL(w.avatar),alt:"Preview"}):null!==d&&void 0!==d&&d.avatar?(0,i.jsx)("img",{src:d.avatar.startsWith("http")?d.avatar:"http://localhost:5000".concat(d.avatar),alt:"Profile",onError:s=>{s.target.onerror=null,s.target.src="https://ui-avatars.com/api/?name=".concat(encodeURIComponent(d.fullName),"&background=6366f1&color=fff")}}):(0,i.jsx)("div",{className:"avatar-placeholder",children:(0,i.jsx)("span",{children:(null===d||void 0===d||null===(a=d.fullName)||void 0===a?void 0:a.charAt(0))||"U"})})}),g&&(0,i.jsxs)("div",{className:"avatar-upload",children:[(0,i.jsx)("input",{type:"file",id:"avatar-upload",accept:"image/*",onChange:s=>y((0,r.A)((0,r.A)({},w),{},{avatar:s.target.files[0]})),disabled:!g}),(0,i.jsxs)("label",{htmlFor:"avatar-upload",className:"upload-label",children:[(0,i.jsx)("i",{className:"fas fa-camera"})," Change Photo"]}),(0,i.jsx)("p",{className:"upload-hint",children:"Recommended: 400x400px (JPG, PNG)"})]})]}),(0,i.jsxs)("form",{className:"profile-form",onSubmit:async s=>{s.preventDefault();try{const s=new FormData;s.append("fullName",w.fullName),s.append("bio",w.bio),w.avatar&&s.append("avatar",w.avatar);const e=await(0,o.r7)(s);if(!e.success)throw new Error(e.message||"Failed to update profile");{const s=(0,r.A)((0,r.A)({},d),{},{fullName:e.user.fullName,bio:e.user.bio,avatar:e.user.avatar});m(s),localStorage.setItem("user",JSON.stringify(s)),b(!1),alert("Profile updated successfully!"),C()}}catch(e){console.error("Profile update error:",e),alert(e.message||"Failed to update profile. Please try again.")}},children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Full Name"}),(0,i.jsx)("input",{type:"text",value:w.fullName,onChange:s=>y((0,r.A)((0,r.A)({},w),{},{fullName:s.target.value})),disabled:!g,required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Email Address"}),(0,i.jsx)("input",{type:"email",value:(null===d||void 0===d?void 0:d.email)||"",disabled:!0}),(0,i.jsx)("p",{className:"form-hint",children:"Email cannot be changed"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Bio"}),(0,i.jsx)("textarea",{value:w.bio,onChange:s=>y((0,r.A)((0,r.A)({},w),{},{bio:s.target.value})),disabled:!g,rows:"4",placeholder:"Tell us about yourself and your learning goals..."})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Member Since"}),(0,i.jsx)("input",{type:"text",value:null!==d&&void 0!==d&&d.createdAt?new Date(d.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",disabled:!0})]}),g&&(0,i.jsxs)("div",{className:"form-actions",children:[(0,i.jsxs)("button",{type:"submit",className:"save-btn",children:[(0,i.jsx)("i",{className:"fas fa-save"})," Save Changes"]}),(0,i.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>{b(!1),y({fullName:(null===d||void 0===d?void 0:d.fullName)||"",bio:(null===d||void 0===d?void 0:d.bio)||"",avatar:null})},children:"Cancel"})]})]})]})]}),"contributions"===u&&(0,i.jsxs)("div",{className:"contributions-tab",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("h2",{children:"My Contributions"}),(0,i.jsxs)("div",{className:"contribution-stats",children:[(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("span",{className:"stat-number",children:k.submittedCourses||0}),(0,i.jsx)("span",{className:"stat-label",children:"Courses Created"})]}),(0,i.jsxs)("div",{className:"stat",children:[(0,i.jsx)("span",{className:"stat-number",children:k.submittedNotes||0}),(0,i.jsx)("span",{className:"stat-label",children:"Notes Shared"})]})]})]}),(0,i.jsxs)("div",{className:"contribution-sections",children:[(0,i.jsxs)("div",{className:"contribution-section",children:[(0,i.jsxs)("h3",{children:[(0,i.jsx)("i",{className:"fas fa-chalkboard-teacher"})," Created Courses"]}),k.submittedCourses>0?(0,i.jsx)("div",{className:"contribution-list",children:[1,2].map(s=>(0,i.jsxs)("div",{className:"contribution-item",children:[(0,i.jsx)("div",{className:"contribution-thumbnail",children:(0,i.jsx)("img",{src:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=100&h=60&fit=crop",alt:"Course"})}),(0,i.jsxs)("div",{className:"contribution-details",children:[(0,i.jsx)("h4",{children:"Complete React Course 2024"}),(0,i.jsxs)("p",{className:"contribution-meta",children:[(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-users"})," 1,250 students"]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-star"})," 4.8 (45 reviews)"]})]}),(0,i.jsxs)("div",{className:"contribution-actions",children:[(0,i.jsxs)("button",{className:"view-btn",children:[(0,i.jsx)("i",{className:"fas fa-eye"})," View"]}),(0,i.jsxs)("button",{className:"edit-btn",children:[(0,i.jsx)("i",{className:"fas fa-edit"})," Edit"]}),(0,i.jsxs)("button",{className:"analytics-btn",children:[(0,i.jsx)("i",{className:"fas fa-chart-bar"})," Analytics"]})]})]})]},s))}):(0,i.jsxs)("div",{className:"empty-state",children:[(0,i.jsx)("i",{className:"fas fa-chalkboard-teacher"}),(0,i.jsx)("h3",{children:"No courses created yet"}),(0,i.jsx)("p",{children:"Share your knowledge by creating your first course"}),(0,i.jsxs)("button",{className:"create-course-btn",onClick:()=>c("/add-content/course"),children:[(0,i.jsx)("i",{className:"fas fa-plus-circle"})," Create Your First Course"]})]})]}),(0,i.jsxs)("div",{className:"contribution-section",children:[(0,i.jsxs)("h3",{children:[(0,i.jsx)("i",{className:"fas fa-file-alt"})," Shared Notes"]}),k.submittedNotes>0?(0,i.jsx)("div",{className:"contribution-list",children:[1,2,3].map(s=>(0,i.jsxs)("div",{className:"contribution-item",children:[(0,i.jsx)("div",{className:"contribution-thumbnail",children:(0,i.jsx)("i",{className:"fas fa-file-pdf"})}),(0,i.jsxs)("div",{className:"contribution-details",children:[(0,i.jsx)("h4",{children:"JavaScript Complete Reference Guide"}),(0,i.jsxs)("p",{className:"contribution-meta",children:[(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-download"})," 1,850 downloads"]}),(0,i.jsxs)("span",{children:[(0,i.jsx)("i",{className:"fas fa-calendar"})," Jan 15, 2024"]})]}),(0,i.jsxs)("div",{className:"contribution-actions",children:[(0,i.jsxs)("button",{className:"view-btn",children:[(0,i.jsx)("i",{className:"fas fa-eye"})," View"]}),(0,i.jsxs)("button",{className:"edit-btn",children:[(0,i.jsx)("i",{className:"fas fa-edit"})," Edit"]}),(0,i.jsxs)("button",{className:"download-btn",children:[(0,i.jsx)("i",{className:"fas fa-download"})," Download Stats"]})]})]})]},s))}):(0,i.jsxs)("div",{className:"empty-state",children:[(0,i.jsx)("i",{className:"fas fa-file-alt"}),(0,i.jsx)("h3",{children:"No notes shared yet"}),(0,i.jsx)("p",{children:"Help others by sharing your study materials"}),(0,i.jsxs)("button",{className:"create-note-btn",onClick:()=>c("/add-content/notes"),children:[(0,i.jsx)("i",{className:"fas fa-plus-circle"})," Share Your First Notes"]})]})]})]})]})]})]})]})]})}},302(s,e,a){a.d(e,{A:()=>o});var r=a(43),t=a(368),l=a(579);const o=function(s){var e;let{showProfile:a=!0}=s;const o=(0,t.Zp)(),[n,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const s=localStorage.getItem("user");s&&i(JSON.parse(s))},[]);const m=s=>s?s.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"U";return(0,l.jsxs)("header",{className:"navbar",children:[(0,l.jsx)("div",{className:"nav-left",children:(0,l.jsx)("div",{className:"logo",onClick:()=>o("/"),children:(0,l.jsx)("img",{src:"/img/logo.png",alt:"E Siksha Logo"})})}),(0,l.jsx)("div",{className:"nav-right",children:a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("nav",{className:"nav-links",children:[(0,l.jsx)("button",{className:"nav-link",onClick:()=>o("/"),children:"Home"}),(0,l.jsx)("button",{className:"nav-link",onClick:()=>o("/list"),children:"Courses"}),(0,l.jsx)("button",{className:"nav-link",onClick:()=>o("/pdf"),children:"Notes"}),(0,l.jsx)("button",{className:"nav-link",onClick:()=>o("/about"),children:"About"})]}),n?(0,l.jsxs)("div",{className:"user-profile",onClick:()=>d(!c),children:[n.avatar?(0,l.jsx)("img",{src:n.avatar,alt:n.fullName,className:"user-avatar"}):(0,l.jsx)("div",{className:"avatar-placeholder",children:m(n.fullName)}),(0,l.jsx)("span",{className:"user-name",children:(null===(e=n.fullName)||void 0===e?void 0:e.split(" ")[0])||"User"}),(0,l.jsx)("i",{className:"fas fa-chevron-".concat(c?"up":"down")}),c&&(0,l.jsxs)("div",{className:"dropdown-menu",children:[(0,l.jsx)("div",{className:"dropdown-header",children:(0,l.jsxs)("div",{className:"user-info",children:[n.avatar?(0,l.jsx)("img",{src:n.avatar,alt:n.fullName}):(0,l.jsx)("div",{className:"avatar-small",children:m(n.fullName)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:n.fullName}),(0,l.jsx)("span",{children:n.email})]})]})}),(0,l.jsx)("div",{className:"dropdown-divider"}),(0,l.jsxs)("button",{className:"dropdown-item",onClick:()=>{(()=>{const s=localStorage.getItem("user");s?"admin"===JSON.parse(s).role?o("/admin"):o("/dashboard"):o("/login")})(),d(!1)},children:[(0,l.jsx)("i",{className:"fas fa-tachometer-alt"}),"Dashboard"]}),(0,l.jsxs)("button",{className:"dropdown-item",onClick:()=>{o("/add-content"),d(!1)},children:[(0,l.jsx)("i",{className:"fas fa-plus-circle"}),"Add Content"]}),(0,l.jsxs)("button",{className:"dropdown-item",onClick:()=>{o("/profile"),d(!1)},children:[(0,l.jsx)("i",{className:"fas fa-user-cog"}),"Edit Profile"]}),(0,l.jsx)("div",{className:"dropdown-divider"}),(0,l.jsxs)("button",{className:"dropdown-item logout",onClick:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),i(null),d(!1),o("/login")},children:[(0,l.jsx)("i",{className:"fas fa-sign-out-alt"}),"Logout"]})]})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("button",{className:"btn btn-primary",onClick:()=>o("/reg"),children:[(0,l.jsx)("i",{className:"fas fa-user-plus"}),"Sign Up"]})})]}):(0,l.jsx)("button",{className:"btn btn-primary",onClick:()=>o("/login"),children:"Get Started"})})]})}},768(s,e,a){a.d(e,{CS:()=>N,DA:()=>h,DY:()=>n,E0:()=>u,Fj:()=>f,K3:()=>v,Lx:()=>i,NJ:()=>m,cs:()=>x,dE:()=>b,lo:()=>w,mc:()=>j,nI:()=>g,r7:()=>c,tO:()=>d,vW:()=>p});var r=a(555),t=a(722);const l="https://e-siksha-mljg.onrender.com/api",o=t.A.create({baseURL:l,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(s=>{const e=localStorage.getItem("token");return e&&(s.headers.Authorization="Bearer ".concat(e)),s},s=>Promise.reject(s)),o.interceptors.response.use(s=>s,s=>{var e;return 401===(null===(e=s.response)||void 0===e?void 0:e.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(s)});const n=async s=>{try{const e=await o.post("/register",s);return e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user))),e.data}catch(r){var e,a;throw console.error("Registration error:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(a=r.response)||void 0===a?void 0:a.data)||{success:!1,message:"Registration failed"}}},i=async s=>{try{const e=await o.post("/login",s);return e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user))),e.data}catch(r){var e,a;throw console.error("Login error:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(a=r.response)||void 0===a?void 0:a.data)||{success:!1,message:"Login failed"}}},c=async s=>{try{const e=new FormData;Object.keys(s).forEach(a=>{"skills"===a&&Array.isArray(s[a])?e.append(a,JSON.stringify(s[a])):("avatar"===a&&(s[a],File),e.append(a,s[a]))});const a=localStorage.getItem("token"),t=await fetch("".concat(l,"/user/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:e}),o=await t.json();if(!t.ok)throw o;if(o.user){const s=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify((0,r.A)((0,r.A)({},s),o.user)))}return o}catch(a){var e;throw console.error("Update profile error:",a),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to update profile"}}},d=async()=>{try{return(await o.get("/user/dashboard")).data}catch(a){var s,e;throw console.error("Dashboard error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load dashboard"}}},m=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await o.get("/courses",{params:s})).data}catch(r){var e,a;throw console.error("Get courses error:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(a=r.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load courses"}}},u=async s=>{try{return(await o.get("/courses/".concat(s))).data}catch(r){var e,a;throw console.error("Get course error:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(a=r.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load course"}}},h=async s=>{try{return(await o.post("/courses/".concat(s,"/enroll"))).data}catch(r){var e,a;throw console.error("Enroll error:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(a=r.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to enroll in course"}}},v=async(s,e)=>{try{return(await o.post("/courses/".concat(s,"/progress"),e)).data}catch(t){var a,r;throw console.error("Progress error:",(null===(a=t.response)||void 0===a?void 0:a.data)||t.message),(null===(r=t.response)||void 0===r?void 0:r.data)||{success:!1,message:"Failed to update progress"}}},j=async s=>{try{const e=localStorage.getItem("token"),a=await fetch("".concat(l,"/courses/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s}),r=await a.json();if(!a.ok)throw r;return r}catch(e){throw console.error("Submit course error:",e),e}},x=async s=>{try{const e=localStorage.getItem("token"),a=await fetch("".concat(l,"/notes/submit"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s}),r=await a.json();if(!a.ok)throw r;return r}catch(e){throw console.error("Error submitting notes:",e),e}},N=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await o.get("/notes",{params:s})).data}catch(r){var e,a;throw console.error("Get notes error:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(a=r.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load notes"}}},p=async s=>{try{return(await o.get("/notes/".concat(s))).data}catch(r){var e,a;throw console.error("Get note error:",(null===(e=r.response)||void 0===e?void 0:e.data)||r.message),(null===(a=r.response)||void 0===a?void 0:a.data)||{success:!1,message:"Failed to load note"}}},f=async()=>{try{return(await o.get("/admin/pending")).data}catch(a){var s,e;throw console.error("Pending content error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load pending content"}}},g=async function(s,e,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{return(await o.post("/admin/content/".concat(s,"/").concat(e,"/approve"),{action:a,reason:r})).data}catch(n){var t,l;throw console.error("Approve content error:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message),(null===(l=n.response)||void 0===l?void 0:l.data)||{success:!1,message:"Failed to process content"}}},b=async()=>{try{return(await o.get("/admin/stats")).data}catch(a){var s,e;throw console.error("Admin stats error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load stats"}}},w=async()=>{try{return(await o.get("/admin/users")).data}catch(a){var s,e;throw console.error("Get users error:",(null===(s=a.response)||void 0===s?void 0:s.data)||a.message),(null===(e=a.response)||void 0===e?void 0:e.data)||{success:!1,message:"Failed to load users"}}}}}]);
//# sourceMappingURL=28.4fb6bf0e.chunk.js.map